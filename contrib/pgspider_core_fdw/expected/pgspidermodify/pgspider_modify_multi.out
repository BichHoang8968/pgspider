sql/pgspidermodify/parameters.conf: No such file or directory
--Testcase 1:
SET datestyle = ISO;
SET
--Testcase 2:
SET timezone = 'UTC';
SET
--Testcase 3:
--DELETE FROM pg_spd_node_info;
--Testcase 4:
--CREATE EXTENSION pgspider_core_fdw;
--Testcase 5:
--CREATE FOREIGN DATA WRAPPER pgspider_core_fdw OPTIONS (host :PGSPIDER_SERVER);
--Testcase 6:
--CREATE FOREIGN DATA WRAPPER pgspider_core_fdw OPTIONS (host :PGSPIDER_SERVER);
--Testcase 7:
--CREATE USER MAPPING FOR CURRENT_USER;
--Testcase 8:
--CREATE USER MAPPING FOR CURRENT_USER;
-- Extensions
--Testcase 9:
--CREATE EXTENSION postgres_fdw;
--Testcase 10:
--CREATE EXTENSION sqlite_fdw;
--Testcase 11:
--CREATE EXTENSION tinybrace_fdw;
--Testcase 12:
--CREATE EXTENSION mysql_fdw;
--Testcase 13:
--CREATE EXTENSION oracle_fdw;
--Testcase 14:
--CREATE EXTENSION odbc_fdw;
--Testcase 15:
--CREATE EXTENSION jdbc_fdw;
--Testcase 16:
--CREATE EXTENSION griddb_fdw;
--Testcase 17:
--CREATE EXTENSION mongo_fdw;
--Testcase 18:
--CREATE EXTENSION dynamodb_fdw;
--Testcase 19:
--CREATE EXTENSION file_fdw;
-- Used data sources
-- Data sources
-- tntbl1: postgres_svr, mysql_svr, tiny_svr, oracle_svr, sqlite_svr
-- key: c1, c2
--Testcase 20:
--CREATE SERVER postgres_svr FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host :POSTGRES_SERVER, port :POSTGRES_PORT);
--Testcase 21:
--CREATE USER mapping for public SERVER postgres_svr OPTIONS(user :POSTGRES_USER, password :POSTGRES_PASS);
--Testcase 22:
--CREATE SERVER mysql_svr FOREIGN DATA WRAPPER mysql_fdw OPTIONS (host :MYSQL_SERVER, port :MYSQL_PORT);
--Testcase 23:
--CREATE USER mapping for public SERVER mysql_svr OPTIONS(username :MYSQL_USER, password :MYSQL_PASS);
--Testcase 24:
--CREATE SERVER tiny_svr FOREIGN DATA WRAPPER tinybrace_fdw OPTIONS (host :TINYBRACE_SERVER, port :TINYBRACE_PORT, dbname 'pgmodifytest.db');
--Testcase 25:
--CREATE USER mapping for public SERVER tiny_svr OPTIONS(username :TINYBRACE_USER, password :TINYBRACE_PASS);
--Testcase 26:
--CREATE SERVER oracle_svr FOREIGN DATA WRAPPER oracle_fdw OPTIONS (dbserver :ORACLE_SERVER, isolation_level 'read_committed', nchar 'true');
--Testcase 27:
--CREATE USER MAPPING FOR CURRENT_USER SERVER oracle_svr OPTIONS (user :ORACLE_USER, password :ORACLE_PASS);
--Testcase 28:
--CREATE SERVER sqlite_svr FOREIGN DATA WRAPPER sqlite_fdw OPTIONS (database '/tmp/pgmodifytest.db');
-- tntbl2: odbc_post_svr, jdbc_mysql_svr, griddb_svr, mongo_svr, dynamodb_svr
-- key: _id
--Testcase 29:
--CREATE SERVER odbc_mysql_svr FOREIGN DATA WRAPPER odbc_fdw OPTIONS (odbc_DRIVER :ODBC_MYSQL_DRIVERNAME, odbc_SERVER :ODBC_SERVER, odbc_port :ODBC_MYSQL_PORT, odbc_DATABASE :ODBC_DATABASE);
--Testcase 30:
--CREATE USER mapping for public SERVER odbc_mysql_svr OPTIONS(odbc_UID :ODBC_MYSQL_USER, odbc_PWD :ODBC_MYSQL_PASS);
--Testcase 31:
--CREATE SERVER odbc_post_svr FOREIGN DATA WRAPPER odbc_fdw OPTIONS (odbc_DRIVER :ODBC_POSTGRES_DRIVERNAME, odbc_SERVER :ODBC_SERVER, odbc_port :ODBC_POSTGRES_PORT, odbc_DATABASE :ODBC_DATABASE);
--Testcase 32:
--CREATE USER mapping for public SERVER odbc_post_svr OPTIONS(odbc_UID :ODBC_POSTGRES_USER, odbc_PWD :ODBC_POSTGRES_PASS);
--Testcase 33:
--CREATE SERVER jdbc_mysql_svr FOREIGN DATA WRAPPER jdbc_fdw OPTIONS(
--drivername :JDBC_MYSQL_DRIVERNAME,
--url :JDBC_MYSQL_URL,
--querytimeout '15',
--jarfile :JDBC_MYSQL_DRIVERPATH,
--maxheapsize '600'
--);
--Testcase 34:
--CREATE USER MAPPING FOR public SERVER jdbc_mysql_svr OPTIONS(username :JDBC_MYSQL_USER, password :JDBC_MYSQL_PASS);
--Testcase 35:
--CREATE SERVER jdbc_post_svr FOREIGN DATA WRAPPER jdbc_fdw OPTIONS(
--drivername :JDBC_POSTGRES_DRIVERNAME,
--url :JDBC_POSTGRES_URL,
--querytimeout '15',
--jarfile :JDBC_POSTGRES_DRIVERPATH,
--maxheapsize '600'
--);
--Testcase 36:
--CREATE USER MAPPING FOR public SERVER jdbc_post_svr OPTIONS(username :JDBC_POSTGRES_USER, password :JDBC_POSTGRES_PASS);
--Testcase 37:
--CREATE SERVER griddb_svr FOREIGN DATA WRAPPER griddb_fdw OPTIONS (host :GRIDDB_HOST, port :GRIDDB_PORT, clustername 'griddbfdwTestCluster');
--Testcase 38:
--CREATE USER MAPPING FOR public SERVER griddb_svr OPTIONS (username :GRIDDB_USER, password :GRIDDB_PASS);
--Testcase 39:
--CREATE SERVER mongo_svr FOREIGN DATA WRAPPER mongo_fdw
--  OPTIONS (address :MONGO_HOST, port :MONGO_PORT);
--Testcase 40:
--CREATE USER MAPPING FOR public SERVER mongo_svr OPTIONS (username :MONGO_USER, password :MONGO_PASS);
--Testcase 41:
--CREATE SERVER dynamodb_svr FOREIGN DATA WRAPPER dynamodb_fdw
--  OPTIONS (endpoint :DYNAMODB_ENDPOINT);
--Testcase 42:
--CREATE USER MAPPING FOR public SERVER dynamodb_svr
--  OPTIONS (user :DYNAMODB_USER, password :DYNAMODB_PASS);
--Testcase 43:
--CREATE SERVER postgres_svr_1 FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host :POSTGRES_1_SERVER, port :POSTGRES_1_PORT);
--Testcase 44:
--CREATE USER mapping for public SERVER postgres_svr_1 OPTIONS(user :POSTGRES_1_USER, password :POSTGRES_1_PASS);
-- tntbl3: postgres_svr, mysql_svr, tiny_svr, oracle_svr, sqlite_svr, odbc_mysql_svr, jdbc_post_svr, griddb_svr, mongo_svr, dynamodb_svr, postgres_svr_1
-- key: _id
--Testcase 45:
--CREATE SERVER postgres_svr_2 FOREIGN DATA WRAPPER postgres_fdw OPTIONS (host :POSTGRES_2_SERVER, port :POSTGRES_2_PORT);
--Testcase 46:
--CREATE USER mapping for public SERVER postgres_svr_2 OPTIONS(user :POSTGRES_2_USER, password :POSTGRES_2_PASS);
-- tntbl4: postgres_svr, postgres_svr_2
-- key: c1
-- tntbl5: file_svr, file_svr_2
-- key: c1
--Testcase 47:
--CREATE SERVER file_svr FOREIGN DATA WRAPPER file_fdw;
--Testcase 48:
--CREATE SERVER file_svr_2 FOREIGN DATA WRAPPER file_fdw;
-- Create multi tenant tables
DROP TABLE IF EXISTS tntbl1;
NOTICE:  table "tntbl1" does not exist, skipping
DROP TABLE
DROP TABLE IF EXISTS tntbl2;
NOTICE:  table "tntbl2" does not exist, skipping
DROP TABLE
DROP TABLE IF EXISTS tntbl3;
NOTICE:  table "tntbl3" does not exist, skipping
DROP TABLE
DROP TABLE IF EXISTS tntbl4;
NOTICE:  table "tntbl4" does not exist, skipping
DROP TABLE
DROP TABLE IF EXISTS tntbl5;
NOTICE:  table "tntbl5" does not exist, skipping
DROP TABLE
-- tntbl1
--Testcase 49:
CREATE TABLE tntbl1 (c1 int, c2 smallint, c3 float, c4 double precision, c5 bigint, c6 timestamp, c7 timestamp with time zone, c8 char(255), c9 varchar(255));
CREATE TABLE
--Testcase 50:
CREATE TABLE tntbl1__pgspider_srv__0 () INHERITS (tntbl1);
CREATE TABLE
-- tntbl2
--Testcase 51:
CREATE TABLE tntbl2 (_id text, c1 int, c2 varchar(255), c3 boolean, c4 double precision, c5 bigint);
CREATE TABLE
--Testcase 52:
CREATE TABLE tntbl2__pgspider_srv__0 () INHERITS (tntbl2);
CREATE TABLE
-- tntbl3
--Testcase 53:
CREATE TABLE tntbl3 (_id text, c1 int, c2 float, c3 double precision, c4 bigint);
CREATE TABLE
--Testcase 54:
CREATE TABLE tntbl3__pgspider_srv__0 () INHERITS (tntbl3);
CREATE TABLE
-- tntbl4
--Testcase 55:
CREATE TABLE tntbl4 (c1 int, c2 text, c3 boolean, c4 double precision, c5 bigint, c6 char(255), c7 varchar(255), c8 float8, c9 smallint, c10 timestamp, c11 timestamp with time zone, c12 date, c13 json, c14 jsonb, c15 uuid, c16 point, c17 bytea, c18 bit(10), c19 varbit(10), c20 interval);
CREATE TABLE
--Testcase 56:
CREATE TABLE tntbl4__pgspider_srv__0 () INHERITS (tntbl4);
CREATE TABLE
-- tntbl5
--Testcase 57:
CREATE TABLE tntbl5 (c1 int, c2 text);
CREATE TABLE
--Testcase 58:
CREATE TABLE tntbl5__pgspider_srv__0 () INHERITS (tntbl5);
CREATE TABLE
-- tables
--Testcase 59:
CREATE TABLE tntbl1__postgres_svr__0() INHERITS (tntbl1__pgspider_srv__0);
CREATE TABLE
--Testcase 60:
CREATE TABLE tntbl1__mysql_svr__0() INHERITS (tntbl1__pgspider_srv__0);
CREATE TABLE
--Testcase 61:
CREATE TABLE tntbl1__tiny_svr__0() INHERITS (tntbl1__pgspider_srv__0);
CREATE TABLE
--Testcase 62:
CREATE TABLE tntbl1__oracle_svr__0() INHERITS (tntbl1__pgspider_srv__0);
CREATE TABLE
--Testcase 63:
CREATE TABLE tntbl1__sqlite_svr__0() INHERITS (tntbl1__pgspider_srv__0);
CREATE TABLE
--Testcase 64:
CREATE TABLE tntbl2__odbc_post_svr__0() INHERITS (tntbl2__pgspider_srv__0);
CREATE TABLE
--Testcase 65:
CREATE TABLE tntbl2__jdbc_mysql_svr__0() INHERITS (tntbl2__pgspider_srv__0);
CREATE TABLE
--Testcase 66:
CREATE TABLE tntbl2__mongo_svr__0() INHERITS (tntbl2__pgspider_srv__0);
CREATE TABLE
--Testcase 67:
CREATE TABLE tntbl2__dynamodb_svr__0() INHERITS (tntbl2__pgspider_srv__0);
CREATE TABLE
--Testcase 68:
CREATE TABLE tntbl2__griddb_svr__0() INHERITS (tntbl2__pgspider_srv__0);
CREATE TABLE
--Testcase 69:
CREATE TABLE tntbl3__jdbc_post_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 70:
CREATE TABLE tntbl3__odbc_mysql_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 71:
CREATE TABLE tntbl3__mongo_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 72:
CREATE TABLE tntbl3__dynamodb_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 73:
CREATE TABLE tntbl3__griddb_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 74:
CREATE TABLE tntbl3__postgres_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 75:
CREATE TABLE tntbl3__mysql_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 76:
CREATE TABLE tntbl3__tiny_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 77:
CREATE TABLE tntbl3__oracle_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 78:
CREATE TABLE tntbl3__sqlite_svr__0() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 79:
CREATE TABLE tntbl3__postgres_svr__1() INHERITS (tntbl3__pgspider_srv__0);
CREATE TABLE
--Testcase 80:
CREATE TABLE tntbl4__postgres_svr__0() INHERITS (tntbl4__pgspider_srv__0);
CREATE TABLE
--Testcase 81:
CREATE TABLE tntbl4__postgres_svr__2() INHERITS (tntbl4__pgspider_srv__0);
CREATE TABLE
--Testcase 82:
CREATE TABLE tntbl5__file_svr__0() INHERITS (tntbl5__pgspider_srv__0);
CREATE TABLE
--Testcase 83:
CREATE TABLE tntbl5__file_svr__2() INHERITS (tntbl5__pgspider_srv__0);
CREATE TABLE
--INIT DATA
INSERT INTO tntbl1__postgres_svr__0 VALUES (1, 0, 1.0, 100.0, 1000, '2022-06-22 14:00:00', '2022-06-22 14:00:00+07', 'char array', 'varchar array');--, '/postgres_svr/');
INSERT 0 1
INSERT INTO tntbl1__sqlite_svr__0 VALUES (1000, 0, 1.0, 100.0, 1000, '2022-06-22 14:00:00', '2022-06-22 14:00:00+07', 'sqlite char array', 'sqlite varchar array');--, '/sqlite_svr/');
INSERT 0 1
INSERT INTO tntbl1__tiny_svr__0 VALUES (100, 0, 1.0, 100.0, 1000, '2022-06-22 14:00:00', '2022-06-22 14:00:00+07', 'tiny array', 'tiny varchar array');--, '/tiny_svr/');
INSERT 0 1
INSERT INTO tntbl1__oracle_svr__0 VALUES (-20, 0, 1.0, 100.0, 1000,'2022-06-22 14:00:00', '2017-08-08 2:00:00', 'char array', 'varchar array');--, '/oracle_svr/');
INSERT 0 1
INSERT INTO tntbl2__odbc_post_svr__0 VALUES ('odbc', 1, 'odbc text', true, 100.0, 10000);--, '/odbc_post_svr/');
INSERT 0 1
INSERT INTO tntbl2__mongo_svr__0 VALUES ('1_', 1, 'foo', true, -1928.121, 1000);--, '/mongo_svr/');
INSERT 0 1
INSERT INTO tntbl2__mongo_svr__0 VALUES ('2_', 2, 'varchar', false, 2000.0, 2000);--, '/mongo_svr/');
INSERT 0 1
INSERT INTO tntbl3__postgres_svr__0 VALUES ('text_post_id', 1, 1.0, 100.0, 1000);--, '/postgres_svr/');
INSERT 0 1
INSERT INTO tntbl3__sqlite_svr__0 VALUES ('text_sqlite_id', 1, 1.0, 100.0, 1000);--, '/sqlite_svr/');
INSERT 0 1
INSERT INTO tntbl3__tiny_svr__0 VALUES ('text_tiny', 1, 1.0, 100.0, 1000);--, '/tiny_svr/');
INSERT 0 1
INSERT INTO tntbl3__jdbc_post_svr__0 VALUES ('jdbc', 10, 10.0, 1000.0, 10000);--, '/jdbc_post_svr/');
INSERT 0 1
INSERT INTO tntbl3__mongo_svr__0 VALUES ('11_', 1, -19.1, 1000);--, '/mongo_svr/');
INSERT 0 1
INSERT INTO tntbl3__mongo_svr__0 VALUES ('22_', 2, 2000.0, 2000);--, '/mongo_svr/');
INSERT 0 1
INSERT INTO tntbl4__postgres_svr__0 VALUES (10, 'text', true, 10.0, 1000, 'char array', 'varchar array', -1.0, 12, '2004-10-19 10:23:54', '2004-10-19 10:23:54+02', '2001-01-01', '{"product": "test","quantity": 1}', '{"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true }', '2f404849-f62c-4234-b0c8-e230bd694045', point '(1,-45)', E'\\xa7a8a9aaabacadaeaf', B'1111111111', B'10101', interval '1 year 3 hours 20 minutes');--, '/postgres_svr/');
INSERT 0 1
INSERT INTO tntbl4__postgres_svr__2 VALUES (20, 'texttext', false, -10.0, -1000, 'char array', 'varchar array', 1.0, 1, '2005-10-19 10:23:54', '2005-10-19 10:23:54+02', '2001-01-01', '{"product": "sample","quantity": 1}', '{"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false }', '2f404849-f62c-4234-b0c8-e230bd694045', point '(1,-45)', E'\\xa7a8a9aaabacadaeaf', B'1111111111', B'10101', interval '1 year 3 hours 20 minutes');--, '/postgres_svr_2/');
INSERT 0 1
INSERT INTO tntbl5__file_svr__0 VALUES (10, 'test');--, '/file_svr/');
INSERT 0 1
INSERT INTO tntbl5__file_svr__0 VALUES (20, 'foo');--, '/file_svr/');
INSERT 0 1
INSERT INTO tntbl5__file_svr__2 VALUES (30, 'test1');--, '/file_svr_2/');
INSERT 0 1
INSERT INTO tntbl5__file_svr__2 VALUES (40, 'foo1');--, '/file_svr_2/');
INSERT 0 1
-- SELECT FROM table if there is any record
--Testcase 84:
SELECT * FROM tntbl1;
  c1  | c2 | c3 | c4  |  c5  |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
------+----+----+-----+------+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    1 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
  100 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
  -20 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 1000 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(4 rows)

--Testcase 85:
SELECT * FROM tntbl1__pgspider_srv__0;
  c1  | c2 | c3 | c4  |  c5  |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
------+----+----+-----+------+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    1 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
  100 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
  -20 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 1000 |  0 |  1 | 100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(4 rows)

--Testcase 86:
SELECT * FROM tntbl2;
 _id  | c1 |    c2     | c3 |    c4     |  c5   
------+----+-----------+----+-----------+-------
 odbc |  1 | odbc text | t  |       100 | 10000
 1_   |  1 | foo       | t  | -1928.121 |  1000
 2_   |  2 | varchar   | f  |      2000 |  2000
(3 rows)

--Testcase 87:
SELECT * FROM tntbl2__pgspider_srv__0;
 _id  | c1 |    c2     | c3 |    c4     |  c5   
------+----+-----------+----+-----------+-------
 odbc |  1 | odbc text | t  |       100 | 10000
 1_   |  1 | foo       | t  | -1928.121 |  1000
 2_   |  2 | varchar   | f  |      2000 |  2000
(3 rows)

--Testcase 88:
SELECT * FROM tntbl3;
      _id       | c1 |  c2   |  c3  |  c4   
----------------+----+-------+------+-------
 jdbc           | 10 |    10 | 1000 | 10000
 11_            |  1 | -19.1 | 1000 |      
 22_            |  2 |  2000 | 2000 |      
 text_post_id   |  1 |     1 |  100 |  1000
 text_tiny      |  1 |     1 |  100 |  1000
 text_sqlite_id |  1 |     1 |  100 |  1000
(6 rows)

--Testcase 89:
SELECT * FROM tntbl3__pgspider_srv__0;
      _id       | c1 |  c2   |  c3  |  c4   
----------------+----+-------+------+-------
 jdbc           | 10 |    10 | 1000 | 10000
 11_            |  1 | -19.1 | 1000 |      
 22_            |  2 |  2000 | 2000 |      
 text_post_id   |  1 |     1 |  100 |  1000
 text_tiny      |  1 |     1 |  100 |  1000
 text_sqlite_id |  1 |     1 |  100 |  1000
(6 rows)

--Testcase 90:
SELECT * FROM tntbl4;
 c1 |    c2    | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8 | c9 |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |       c20       
----+----------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+----+----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+-----------------
 10 | text     | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array | -1 | 12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 | texttext | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |  1 |  1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(2 rows)

--Testcase 91:
SELECT * FROM tntbl4__pgspider_srv__0;
 c1 |    c2    | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8 | c9 |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |       c20       
----+----------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+----+----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+-----------------
 10 | text     | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array | -1 | 12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 | texttext | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |  1 |  1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(2 rows)

--Testcase 92:
SELECT * FROM tntbl5;
 c1 |  c2   
----+-------
 10 | test
 20 | foo
 30 | test1
 40 | foo1
(4 rows)

--Testcase 93:
SELECT * FROM tntbl5__pgspider_srv__0;
 c1 |  c2   
----+-------
 10 | test
 20 | foo
 30 | test1
 40 | foo1
(4 rows)

--------------------------------------------------------------------------------
-- *** Start test for tntbl1 *** --
--
-- INSERT
-- insert with DEFAULT in the target_list
--
--Testcase 94:
INSERT INTO tntbl1 (c1, c2, c3, c4, c5, c6, c7, c8, c9) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 95:
INSERT INTO tntbl1 (c1, c2) VALUES (1, DEFAULT);
INSERT 0 1
--Testcase 96:
INSERT INTO tntbl1 (c1, c2, c3) VALUES (DEFAULT, 5, DEFAULT);
INSERT 0 1
--Testcase 97:
INSERT INTO tntbl1 VALUES (DEFAULT, 6, 2.6, 5453.454, 5989, '2001-01-01 04:05:02');
INSERT 0 1
--Testcase 98:
INSERT INTO tntbl1 VALUES (DEFAULT, 7);
INSERT 0 1
--Testcase 99:
SELECT * FROM tntbl1;
  c1  | c2 | c3  |    c4    |  c5  |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
------+----+-----+----------+------+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
      |    |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
    1 |    |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  5 |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  6 | 2.6 | 5453.454 | 5989 | 2001-01-01 04:05:02 |                        |                                                                                                                                                                                                                                                                 | 
      |  7 |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
    1 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
  100 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
  -20 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 1000 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--
-- insert with similar expression / target_list VALUES (all fail)
--
--Testcase 100:
INSERT INTO tntbl1 (c1, c2, c3, c4, c5, c6, c7, c8, c9) VALUES (10, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
ERROR:  INSERT has more target columns than expressions
LINE 1: ...SERT INTO tntbl1 (c1, c2, c3, c4, c5, c6, c7, c8, c9) VALUES...
                                                             ^
--Testcase 101:
INSERT INTO tntbl1 (c1, c2, c3) VALUES (2, DEFAULT);
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl1 (c1, c2, c3) VALUES (2, DEFAULT);
                                    ^
--Testcase 102:
INSERT INTO tntbl1 (c1, c2) VALUES (3, 2, 5);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl1 (c1, c2) VALUES (3, 2, 5);
                                                  ^
--Testcase 103:
INSERT INTO tntbl1 (c1, c2) VALUES (DEFAULT, DEFAULT, 6);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl1 (c1, c2) VALUES (DEFAULT, DEFAULT, 6);
                                                              ^
--Testcase 104:
SELECT * FROM tntbl1;
  c1  | c2 | c3  |    c4    |  c5  |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
------+----+-----+----------+------+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
      |    |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
    1 |    |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  5 |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  6 | 2.6 | 5453.454 | 5989 | 2001-01-01 04:05:02 |                        |                                                                                                                                                                                                                                                                 | 
      |  7 |     |          |      |                     |                        |                                                                                                                                                                                                                                                                 | 
    1 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
  100 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
  -20 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 1000 |  0 |   1 |      100 | 1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--
-- VALUES test
--
--Testcase 105:
INSERT INTO tntbl1 VALUES (10, 20, 3.0, 452.254, 599, '2038-01-19 03:14:07', '2004-10-19 10:23:54+02', '40', 'abc'), (-1, 2, DEFAULT, DEFAULT, 69845, '2004-10-19 10:23:54', '1970-01-01 00:00:01+07', 'Beera', 'John Does'),
    ((SELECT 2), (SELECT i FROM (VALUES(3)) as foo (i)), 4.0, 656.212, 5944, '2007-10-19 10:23:54', '2007-10-19 10:23:54+02', 'VALUES are fun!', 'foo');
INSERT 0 3
--Testcase 106:
SELECT * FROM tntbl1;
  c1  | c2 | c3  |    c4    |  c5   |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
------+----+-----+----------+-------+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
      |    |     |          |       |                     |                        |                                                                                                                                                                                                                                                                 | 
    1 |    |     |          |       |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  5 |     |          |       |                     |                        |                                                                                                                                                                                                                                                                 | 
      |  6 | 2.6 | 5453.454 |  5989 | 2001-01-01 04:05:02 |                        |                                                                                                                                                                                                                                                                 | 
      |  7 |     |          |       |                     |                        |                                                                                                                                                                                                                                                                 | 
   10 | 20 |   3 |  452.254 |   599 | 2038-01-19 03:14:07 | 2004-10-19 08:23:54+00 | 40                                                                                                                                                                                                                                                              | abc
   -1 |  2 |     |          | 69845 | 2004-10-19 10:23:54 | 1969-12-31 17:00:01+00 | Beera                                                                                                                                                                                                                                                           | John Does
    2 |  3 |   4 |  656.212 |  5944 | 2007-10-19 10:23:54 | 2007-10-19 08:23:54+00 | VALUES are fun!                                                                                                                                                                                                                                                 | foo
    1 |  0 |   1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
  100 |  0 |   1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
  -20 |  0 |   1 |      100 |  1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 1000 |  0 |   1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(12 rows)

--
-- TOASTed value test
--
--Testcase 107:
INSERT INTO tntbl1 VALUES (9, 9, 902.12, 9545.03, 3122, '2030-02-20 03:00:07', '2005-10-20 10:20:54+02', repeat('x', 255), repeat('a', 255));
INSERT 0 1
--Testcase 108:
SELECT c1, c2, c3, c4, char_length(c8), char_length(c9) FROM tntbl1;
  c1  | c2 |   c3   |    c4    | char_length | char_length 
------+----+--------+----------+-------------+-------------
      |    |        |          |             |            
    1 |    |        |          |             |            
      |  5 |        |          |             |            
      |  6 |    2.6 | 5453.454 |             |            
      |  7 |        |          |             |            
   10 | 20 |      3 |  452.254 |           2 |           3
   -1 |  2 |        |          |           5 |           9
    2 |  3 |      4 |  656.212 |          15 |           3
    9 |  9 | 902.12 |  9545.03 |         255 |         255
    1 |  0 |      1 |      100 |          10 |          13
  100 |  0 |      1 |      100 |          10 |          18
  -20 |  0 |      1 |      100 |          10 |          13
 1000 |  0 |      1 |      100 |          17 |          20
(13 rows)

--
-- INSERT with IN feature, this feature not work yet
--
--Testcase 109:
INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') VALUES (-10, 20, 82.21, 213.12, 9565, '2003-10-19 10:23:54', '1971-01-01 00:00:01+07', 'One', 'OneOne'); 
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') V...
                           ^
--Testcase 110:
INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/oracle_svr/', '/pgspider_core_svr/pgspider_svr/tiny_svr/') VALUES (650, 120, 73.265, 78523.5, 5421659, '2002-10-19 10:23:54', '1972-01-01 00:00:01+07', 'Two', 'TwoTwo');
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/orac...
                           ^
--
-- UPDATE
--
--Testcase 111:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
  c1  | c2 |   c3   |    c4    |  c5   |         c6          |           c7           | char_length | char_length 
------+----+--------+----------+-------+---------------------+------------------------+-------------+-------------
      |    |        |          |       |                     |                        |             |            
    1 |    |        |          |       |                     |                        |             |            
      |  5 |        |          |       |                     |                        |             |            
      |  6 |    2.6 | 5453.454 |  5989 | 2001-01-01 04:05:02 |                        |             |            
      |  7 |        |          |       |                     |                        |             |            
   10 | 20 |      3 |  452.254 |   599 | 2038-01-19 03:14:07 | 2004-10-19 08:23:54+00 |           2 |           3
   -1 |  2 |        |          | 69845 | 2004-10-19 10:23:54 | 1969-12-31 17:00:01+00 |           5 |           9
    2 |  3 |      4 |  656.212 |  5944 | 2007-10-19 10:23:54 | 2007-10-19 08:23:54+00 |          15 |           3
    9 |  9 | 902.12 |  9545.03 |  3122 | 2030-02-20 03:00:07 | 2005-10-20 08:20:54+00 |         255 |         255
    1 |  0 |      1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 |          10 |          13
  100 |  0 |      1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 |          10 |          18
  -20 |  0 |      1 |      100 |  1000 | 2022-06-22 14:00:00 | 2017-08-08 02:00:00+00 |          10 |          13
 1000 |  0 |      1 |      100 |  1000 | 2022-06-22 14:00:00 | 2022-06-22 07:00:00+00 |          17 |          20
(13 rows)

--Testcase 112:
UPDATE tntbl1 SET c6 = DEFAULT, c4 = DEFAULT;
UPDATE 13
--Testcase 113:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
  c1  | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
------+----+--------+----+-------+----+------------------------+-------------+-------------
      |    |        |    |       |    |                        |             |            
    1 |    |        |    |       |    |                        |             |            
      |  5 |        |    |       |    |                        |             |            
      |  6 |    2.6 |    |  5989 |    |                        |             |            
      |  7 |        |    |       |    |                        |             |            
   10 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
   -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
    2 |  3 |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |          15 |           3
    9 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
    1 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
  100 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
  -20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 1000 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(13 rows)

-- aliases for the UPDATE target table
--Testcase 114:
UPDATE tntbl1 AS t SET c1 = 10 WHERE t.c3 = 902.12;
UPDATE 1
--Testcase 115:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
  c1  | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
------+----+--------+----+-------+----+------------------------+-------------+-------------
      |    |        |    |       |    |                        |             |            
    1 |    |        |    |       |    |                        |             |            
      |  5 |        |    |       |    |                        |             |            
      |  6 |    2.6 |    |  5989 |    |                        |             |            
      |  7 |        |    |       |    |                        |             |            
   10 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
   -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
    2 |  3 |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |          15 |           3
   10 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
    1 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
  100 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
  -20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 1000 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(13 rows)

--Testcase 116:
UPDATE tntbl1 t SET c1 = t.c1 + 10 WHERE t.c3 = 3.0;
UPDATE 1
--Testcase 117:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
  c1  | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
------+----+--------+----+-------+----+------------------------+-------------+-------------
      |    |        |    |       |    |                        |             |            
    1 |    |        |    |       |    |                        |             |            
      |  5 |        |    |       |    |                        |             |            
      |  6 |    2.6 |    |  5989 |    |                        |             |            
      |  7 |        |    |       |    |                        |             |            
   -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
    2 |  3 |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |          15 |           3
   10 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
   20 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
    1 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
  100 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
  -20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 1000 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(13 rows)

--
-- Test VALUES in FROM
--
--Testcase 118:
UPDATE tntbl1 SET c1=v.i FROM (VALUES(20, 0)) AS v(i, j)
  WHERE tntbl1.c2 = v.j;
UPDATE 4
--Testcase 119:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
----+----+--------+----+-------+----+------------------------+-------------+-------------
    |    |        |    |       |    |                        |             |            
  1 |    |        |    |       |    |                        |             |            
    |  5 |        |    |       |    |                        |             |            
    |  6 |    2.6 |    |  5989 |    |                        |             |            
    |  7 |        |    |       |    |                        |             |            
 -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
  2 |  3 |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |          15 |           3
 10 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
 20 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(13 rows)

-- fail, wrong data type:
--Testcase 120:
UPDATE tntbl1 SET c1 = v.* FROM (VALUES(30, 0)) AS v(i, j)
  WHERE tntbl1.c2 = v.j;
ERROR:  column "c1" is of type integer but expression is of type record
LINE 1: UPDATE tntbl1 SET c1 = v.* FROM (VALUES(30, 0)) AS v(i, j)
                               ^
HINT:  You will need to rewrite or cast the expression.
--
-- Test multiple-set-clause syntax
--
--Testcase 121:
INSERT INTO tntbl1 SELECT c1+20, c2+50, c3 FROM tntbl1;
INSERT 0 13
--Testcase 122:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
----+----+--------+----+-------+----+------------------------+-------------+-------------
    |    |        |    |       |    |                        |             |            
  1 |    |        |    |       |    |                        |             |            
    |  5 |        |    |       |    |                        |             |            
    |  6 |    2.6 |    |  5989 |    |                        |             |            
    |  7 |        |    |       |    |                        |             |            
 -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
  2 |  3 |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |          15 |           3
 10 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
 20 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |    |       |    |                        |             |            
 21 |    |        |    |       |    |                        |             |            
    | 55 |        |    |       |    |                        |             |            
    | 56 |    2.6 |    |       |    |                        |             |            
    | 57 |        |    |       |    |                        |             |            
 19 | 52 |        |    |       |    |                        |             |            
 22 | 53 |      4 |    |       |    |                        |             |            
 30 | 59 | 902.12 |    |       |    |                        |             |            
 40 | 70 |      3 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

--Testcase 123:
UPDATE tntbl1 SET (c8,c1,c2) = ('bugle', c1+11, DEFAULT) WHERE c9 = 'foo';
UPDATE 1
--Testcase 124:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   | c4 |  c5   | c6 |           c7           | char_length | char_length 
----+----+--------+----+-------+----+------------------------+-------------+-------------
    |    |        |    |       |    |                        |             |            
  1 |    |        |    |       |    |                        |             |            
    |  5 |        |    |       |    |                        |             |            
    |  6 |    2.6 |    |  5989 |    |                        |             |            
    |  7 |        |    |       |    |                        |             |            
 -1 |  2 |        |    | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
 10 |  9 | 902.12 |    |  3122 |    | 2005-10-20 08:20:54+00 |         255 |         255
 20 | 20 |      3 |    |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |    |       |    |                        |             |            
 21 |    |        |    |       |    |                        |             |            
    | 55 |        |    |       |    |                        |             |            
    | 56 |    2.6 |    |       |    |                        |             |            
    | 57 |        |    |       |    |                        |             |            
 19 | 52 |        |    |       |    |                        |             |            
 22 | 53 |      4 |    |       |    |                        |             |            
 30 | 59 | 902.12 |    |       |    |                        |             |            
 40 | 70 |      3 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 40 | 50 |      1 |    |       |    |                        |             |            
 13 |    |      4 |    |  5944 |    | 2007-10-19 08:23:54+00 |           5 |           3
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |    |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |    |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

--Testcase 125:
UPDATE tntbl1 SET (c9,c4) = ('car', c1+c3), c1 = c1 + 1 WHERE c5 = 3122;
UPDATE 1
--Testcase 126:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   |   c4   |  c5   | c6 |           c7           | char_length | char_length 
----+----+--------+--------+-------+----+------------------------+-------------+-------------
    |    |        |        |       |    |                        |             |            
  1 |    |        |        |       |    |                        |             |            
    |  5 |        |        |       |    |                        |             |            
    |  6 |    2.6 |        |  5989 |    |                        |             |            
    |  7 |        |        |       |    |                        |             |            
 -1 |  2 |        |        | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
 20 | 20 |      3 |        |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |        |       |    |                        |             |            
 21 |    |        |        |       |    |                        |             |            
    | 55 |        |        |       |    |                        |             |            
    | 56 |    2.6 |        |       |    |                        |             |            
    | 57 |        |        |       |    |                        |             |            
 19 | 52 |        |        |       |    |                        |             |            
 22 | 53 |      4 |        |       |    |                        |             |            
 30 | 59 | 902.12 |        |       |    |                        |             |            
 40 | 70 |      3 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 13 |    |      4 |        |  5944 |    | 2007-10-19 08:23:54+00 |           5 |           3
 11 |  9 | 902.12 | 912.12 |  3122 |    | 2005-10-20 08:20:54+00 |         255 |           3
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |        |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

-- fail, multi assignment to same column:
--Testcase 127:
UPDATE tntbl1 SET (c9,c5) = ('car', c1+c5), c5 = c1 + 1 WHERE c2 = 20;
ERROR:  multiple assignments to same column "c5"
-- uncorrelated sub-SELECT:
--Testcase 128:
UPDATE tntbl1
  SET (c1,c3) = (SELECT c1,c3 FROM tntbl1 where c3 = 3 and c9 = 'car')
  WHERE c1 = 100 AND c2 = 20.0;
UPDATE 0
--Testcase 129:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   |   c4   |  c5   | c6 |           c7           | char_length | char_length 
----+----+--------+--------+-------+----+------------------------+-------------+-------------
    |    |        |        |       |    |                        |             |            
  1 |    |        |        |       |    |                        |             |            
    |  5 |        |        |       |    |                        |             |            
    |  6 |    2.6 |        |  5989 |    |                        |             |            
    |  7 |        |        |       |    |                        |             |            
 -1 |  2 |        |        | 69845 |    | 1969-12-31 17:00:01+00 |           5 |           9
 20 | 20 |      3 |        |   599 |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |        |       |    |                        |             |            
 21 |    |        |        |       |    |                        |             |            
    | 55 |        |        |       |    |                        |             |            
    | 56 |    2.6 |        |       |    |                        |             |            
    | 57 |        |        |       |    |                        |             |            
 19 | 52 |        |        |       |    |                        |             |            
 22 | 53 |      4 |        |       |    |                        |             |            
 30 | 59 | 902.12 |        |       |    |                        |             |            
 40 | 70 |      3 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 40 | 50 |      1 |        |       |    |                        |             |            
 13 |    |      4 |        |  5944 |    | 2007-10-19 08:23:54+00 |           5 |           3
 11 |  9 | 902.12 | 912.12 |  3122 |    | 2005-10-20 08:20:54+00 |         255 |           3
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |        |  1000 |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |        |  1000 |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

-- correlated sub-SELECT:
--Testcase 130:
UPDATE tntbl1 o
  SET (c4,c5) = (SELECT c4+1,c5 FROM tntbl1 i
               where i.c4=o.c3 and i.c5=o.c5 and i.c5 is not distinct FROM o.c5);
UPDATE 26
--Testcase 131:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   | c4 | c5 | c6 |           c7           | char_length | char_length 
----+----+--------+----+----+----+------------------------+-------------+-------------
    |    |        |    |    |    |                        |             |            
  1 |    |        |    |    |    |                        |             |            
    |  5 |        |    |    |    |                        |             |            
    |  6 |    2.6 |    |    |    |                        |             |            
    |  7 |        |    |    |    |                        |             |            
 -1 |  2 |        |    |    |    | 1969-12-31 17:00:01+00 |           5 |           9
 20 | 20 |      3 |    |    |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |    |    |    |                        |             |            
 21 |    |        |    |    |    |                        |             |            
    | 55 |        |    |    |    |                        |             |            
    | 56 |    2.6 |    |    |    |                        |             |            
    | 57 |        |    |    |    |                        |             |            
 19 | 52 |        |    |    |    |                        |             |            
 22 | 53 |      4 |    |    |    |                        |             |            
 30 | 59 | 902.12 |    |    |    |                        |             |            
 40 | 70 |      3 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 13 |    |      4 |    |    |    | 2007-10-19 08:23:54+00 |           5 |           3
 11 |  9 | 902.12 |    |    |    | 2005-10-20 08:20:54+00 |         255 |           3
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |    |    |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

-- fail, multiple rows supplied:
--Testcase 132:
UPDATE tntbl1 SET (c1,c2) = (SELECT c2+1,c1 FROM tntbl1);
ERROR:  more than one row returned by a subquery used as an expression
-- set to null if no rows supplied:
--Testcase 133:
UPDATE tntbl1 SET (c4,c5) = (SELECT c4+1,c5 FROM tntbl1 where c5 = 1000)
  WHERE c5 = 11;
UPDATE 0
--Testcase 134:
SELECT c1, c2, c3, c4, c5, c6, c7, char_length(c8), char_length(c9) FROM tntbl1;
 c1 | c2 |   c3   | c4 | c5 | c6 |           c7           | char_length | char_length 
----+----+--------+----+----+----+------------------------+-------------+-------------
    |    |        |    |    |    |                        |             |            
  1 |    |        |    |    |    |                        |             |            
    |  5 |        |    |    |    |                        |             |            
    |  6 |    2.6 |    |    |    |                        |             |            
    |  7 |        |    |    |    |                        |             |            
 -1 |  2 |        |    |    |    | 1969-12-31 17:00:01+00 |           5 |           9
 20 | 20 |      3 |    |    |    | 2004-10-19 08:23:54+00 |           2 |           3
    |    |        |    |    |    |                        |             |            
 21 |    |        |    |    |    |                        |             |            
    | 55 |        |    |    |    |                        |             |            
    | 56 |    2.6 |    |    |    |                        |             |            
    | 57 |        |    |    |    |                        |             |            
 19 | 52 |        |    |    |    |                        |             |            
 22 | 53 |      4 |    |    |    |                        |             |            
 30 | 59 | 902.12 |    |    |    |                        |             |            
 40 | 70 |      3 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 40 | 50 |      1 |    |    |    |                        |             |            
 13 |    |      4 |    |    |    | 2007-10-19 08:23:54+00 |           5 |           3
 11 |  9 | 902.12 |    |    |    | 2005-10-20 08:20:54+00 |         255 |           3
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          10 |          13
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          10 |          18
 20 |  0 |      1 |    |    |    | 2017-08-08 02:00:00+00 |          10 |          13
 20 |  0 |      1 |    |    |    | 2022-06-22 07:00:00+00 |          17 |          20
(26 rows)

-- *-expansion should work in this context:
--Testcase 135:
UPDATE tntbl1 SET (c1,c2) = ROW(v.*) FROM (VALUES(2, 100)) AS v(i, j)
  WHERE tntbl1.c2 = v.i;
UPDATE 1
-- you might expect this to work, but syntactically it's not a RowExpr:
--Testcase 136:
UPDATE tntbl1 SET (c1,c2) = (v.*) FROM (VALUES(2, 101)) AS v(i, j)
  WHERE tntbl1.c2 = v.i;
ERROR:  source for a multiple-column UPDATE item must be a sub-SELECT or ROW() expression
LINE 1: UPDATE tntbl1 SET (c1,c2) = (v.*) FROM (VALUES(2, 101)) AS v...
                                     ^
-- if an alias for the target table is specified, don't allow references
-- to the original table name
--Testcase 137:
UPDATE tntbl1 AS t SET c1 = tntbl1.c1 + 10 WHERE t.c2 = 10;
ERROR:  invalid reference to FROM-clause entry for table "tntbl1"
LINE 1: UPDATE tntbl1 AS t SET c1 = tntbl1.c1 + 10 WHERE t.c2 = 10;
                                    ^
HINT:  Perhaps you meant to reference the table alias "t".
-- Make sure that we can update to a TOASTed value.
--Testcase 138:
UPDATE tntbl1 SET c9 = repeat('x', 255) WHERE c9 = 'car';
UPDATE 1
--Testcase 139:
SELECT c1, c2, char_length(c9) FROM tntbl1;
 c1 | c2  | char_length 
----+-----+-------------
  2 | 100 |           9
 11 |   9 |         255
    |     |            
  1 |     |            
    |   5 |            
    |   6 |            
    |   7 |            
 20 |  20 |           3
    |     |            
 21 |     |            
    |  55 |            
    |  56 |            
    |  57 |            
 19 |  52 |            
 22 |  53 |            
 30 |  59 |            
 40 |  70 |            
 40 |  50 |            
 40 |  50 |            
 40 |  50 |            
 40 |  50 |            
 13 |     |           3
 20 |   0 |          13
 20 |   0 |          18
 20 |   0 |          13
 20 |   0 |          20
(26 rows)

-- Check multi-assignment with a Result node to handle a one-time filter.
--Testcase 140:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE tntbl1 t
  SET (c2, c3) = (SELECT c3, c2 FROM tntbl1 s WHERE s.c2 = t.c2)
  WHERE CURRENT_USER = SESSION_USER;
                               QUERY PLAN                                
-------------------------------------------------------------------------
 Update on public.tntbl1 t
   Update on public.tntbl1 t_1
   Update on public.tntbl1__pgspider_srv__0 t_2
   Update on public.tntbl1__postgres_svr__0 t_3
   Update on public.tntbl1__mysql_svr__0 t_4
   Update on public.tntbl1__tiny_svr__0 t_5
   Update on public.tntbl1__oracle_svr__0 t_6
   Update on public.tntbl1__sqlite_svr__0 t_7
   ->  Result
         Output: $1, $2, (SubPlan 1 (returns $1,$2)), t.tableoid, t.ctid
         ->  Append
               ->  Result
                     Output: t_1.c2, t_1.tableoid, t_1.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1 t_1
                           Output: t_1.c2, t_1.tableoid, t_1.ctid
               ->  Result
                     Output: t_2.c2, t_2.tableoid, t_2.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__pgspider_srv__0 t_2
                           Output: t_2.c2, t_2.tableoid, t_2.ctid
               ->  Result
                     Output: t_3.c2, t_3.tableoid, t_3.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__postgres_svr__0 t_3
                           Output: t_3.c2, t_3.tableoid, t_3.ctid
               ->  Result
                     Output: t_4.c2, t_4.tableoid, t_4.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__mysql_svr__0 t_4
                           Output: t_4.c2, t_4.tableoid, t_4.ctid
               ->  Result
                     Output: t_5.c2, t_5.tableoid, t_5.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__tiny_svr__0 t_5
                           Output: t_5.c2, t_5.tableoid, t_5.ctid
               ->  Result
                     Output: t_6.c2, t_6.tableoid, t_6.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__oracle_svr__0 t_6
                           Output: t_6.c2, t_6.tableoid, t_6.ctid
               ->  Result
                     Output: t_7.c2, t_7.tableoid, t_7.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl1__sqlite_svr__0 t_7
                           Output: t_7.c2, t_7.tableoid, t_7.ctid
         SubPlan 1 (returns $1,$2)
           ->  Append
                 ->  Seq Scan on public.tntbl1 s_1
                       Output: s_1.c3, s_1.c2
                       Filter: (s_1.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__pgspider_srv__0 s_2
                       Output: s_2.c3, s_2.c2
                       Filter: (s_2.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__postgres_svr__0 s_3
                       Output: s_3.c3, s_3.c2
                       Filter: (s_3.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__mysql_svr__0 s_4
                       Output: s_4.c3, s_4.c2
                       Filter: (s_4.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__tiny_svr__0 s_5
                       Output: s_5.c3, s_5.c2
                       Filter: (s_5.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__oracle_svr__0 s_6
                       Output: s_6.c3, s_6.c2
                       Filter: (s_6.c2 = t.c2)
                 ->  Seq Scan on public.tntbl1__sqlite_svr__0 s_7
                       Output: s_7.c3, s_7.c2
                       Filter: (s_7.c2 = t.c2)
(69 rows)

--Testcase 141:
UPDATE tntbl1 t
  SET (c2, c3) = (SELECT c3, c2 FROM tntbl1 s WHERE s.c2 = t.c2)
  WHERE CURRENT_USER = SESSION_USER;
ERROR:  more than one row returned by a subquery used as an expression
--Testcase 142:
SELECT c2, c3, char_length(c9) FROM tntbl1;
 c2  |   c3   | char_length 
-----+--------+-------------
 100 |        |           9
   9 | 902.12 |         255
     |        |            
     |        |            
   5 |        |            
   6 |    2.6 |            
   7 |        |            
  20 |      3 |           3
     |        |            
     |        |            
  55 |        |            
  56 |    2.6 |            
  57 |        |            
  52 |        |            
  53 |      4 |            
  59 | 902.12 |            
  70 |      3 |            
  50 |      1 |            
  50 |      1 |            
  50 |      1 |            
  50 |      1 |            
     |      4 |           3
   0 |      1 |          13
   0 |      1 |          18
   0 |      1 |          13
   0 |      1 |          20
(26 rows)

--
-- UPDATE with IN feature
--
--Testcase 143:
UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') SET c4 = 56563.1212;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') SET c4...
                      ^
--Testcase 144:
UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/sqlite_svr/') SET c3 = 22.2;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/postgres_...
                      ^
--
-- DELETE
--
-- allow an alias to be specified for DELETE's target table
--Testcase 145:
DELETE FROM tntbl1 AS dt WHERE dt.c1 > 75;
DELETE 0
-- if an alias is specified, don't allow the original table name
-- to be referenced
--Testcase 146:
DELETE FROM tntbl1 dt WHERE tntbl1.c1 > 25;
ERROR:  invalid reference to FROM-clause entry for table "tntbl1"
LINE 1: DELETE FROM tntbl1 dt WHERE tntbl1.c1 > 25;
                                    ^
HINT:  Perhaps you meant to reference the table alias "dt".
--Testcase 147:
SELECT c1, c2, char_length(c9) FROM tntbl1;
 c1 | c2  | char_length 
----+-----+-------------
  2 | 100 |           9
 11 |   9 |         255
    |     |            
  1 |     |            
    |   5 |            
    |   6 |            
    |   7 |            
 20 |  20 |           3
    |     |            
 21 |     |            
    |  55 |            
    |  56 |            
    |  57 |            
 19 |  52 |            
 22 |  53 |            
 30 |  59 |            
 40 |  70 |            
 40 |  50 |            
 40 |  50 |            
 40 |  50 |            
 40 |  50 |            
 13 |     |           3
 20 |   0 |          13
 20 |   0 |          18
 20 |   0 |          13
 20 |   0 |          20
(26 rows)

-- delete a row with a TOASTed value
--Testcase 148:
DELETE FROM tntbl1 WHERE c2 > 2;
DELETE 17
--Testcase 149:
SELECT c1, c2, char_length(c9) FROM tntbl1;
 c1 | c2 | char_length 
----+----+-------------
    |    |            
  1 |    |            
    |    |            
 21 |    |            
 13 |    |           3
 20 |  0 |          13
 20 |  0 |          18
 20 |  0 |          13
 20 |  0 |          20
(9 rows)

--
-- DELETE with IN feature
--
--Testcase 150:
DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') WHERE c1 = 4;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') W...
                           ^
--Testcase 151:
DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/sqlite_svr/', '/pgspider_core_svr/pgspider_svr/tiny_svr/', '/pgspider_core_svr/pgspider_svr/mysql_svr/') WHERE c5 = 4;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/sqli...
                           ^
-- *** Finish test for tntbl1 *** --
-----------------------------------------------------------------------------------
-- *** Start test for tntbl2 *** --
--
-- INSERT
-- insert with DEFAULT in the target_list
--
--Testcase 152:
INSERT INTO tntbl2 (_id, c1, c2, c3, c4, c5) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 153:
INSERT INTO tntbl2 (_id, c2, c3) VALUES ('3', DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 154:
INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('4', DEFAULT, '3q', DEFAULT);
INSERT 0 1
--Testcase 155:
INSERT INTO tntbl2 VALUES ('DEFAULT', DEFAULT, 'test', true, 4654.0, 4000);
INSERT 0 1
--Testcase 156:
INSERT INTO tntbl2 VALUES ('test', DEFAULT, 'test', false);
INSERT 0 1
--Testcase 157:
SELECT * FROM tntbl2;
   _id   | c1 |    c2     | c3 |    c4     |  c5   
---------+----+-----------+----+-----------+-------
         |    |           |    |           |      
 3       |    |           |    |           |      
 4       |    | 3q        |    |           |      
 DEFAULT |    | test      | t  |      4654 |  4000
 test    |    | test      | f  |           |      
 odbc    |  1 | odbc text | t  |       100 | 10000
 1_      |  1 | foo       | t  | -1928.121 |  1000
 2_      |  2 | varchar   | f  |      2000 |  2000
(8 rows)

--
-- insert with similar expression / target_list VALUES (all fail)
--
--Testcase 158:
INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('121', DEFAULT, DEFAULT);
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('121', DEFAULT,...
                                         ^
--Testcase 159:
INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('122', 1, '2');
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('122', 1, '2');
                                         ^
--Testcase 160:
INSERT INTO tntbl2 (_id, c1) VALUES ('a', 1, '3');
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl2 (_id, c1) VALUES ('a', 1, '3');
                                                     ^
--Testcase 161:
INSERT INTO tntbl2 (_id, c1) VALUES ('b', DEFAULT, DEFAULT);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl2 (_id, c1) VALUES ('b', DEFAULT, DEFAULT);
                                                           ^
--Testcase 162:
SELECT * FROM tntbl2;
   _id   | c1 |    c2     | c3 |    c4     |  c5   
---------+----+-----------+----+-----------+-------
         |    |           |    |           |      
 3       |    |           |    |           |      
 4       |    | 3q        |    |           |      
 DEFAULT |    | test      | t  |      4654 |  4000
 test    |    | test      | f  |           |      
 odbc    |  1 | odbc text | t  |       100 | 10000
 1_      |  1 | foo       | t  | -1928.121 |  1000
 2_      |  2 | varchar   | f  |      2000 |  2000
(8 rows)

--
-- VALUES test
--
--Testcase 163:
INSERT INTO tntbl2 VALUES('value1', 10, 'foo', false, 40.0, 5000), ('value2', -1, 'foo1', true, 2.0, DEFAULT),
    ((SELECT 'abc'), (SELECT 2), 'VALUES are fun!', true, (SELECT i FROM (VALUES(3.0)) as foo (i)), 1000);
INSERT 0 3
--Testcase 164:
SELECT * FROM tntbl2;
   _id   | c1 |       c2        | c3 |    c4     |  c5   
---------+----+-----------------+----+-----------+-------
         |    |                 |    |           |      
 3       |    |                 |    |           |      
 4       |    | 3q              |    |           |      
 DEFAULT |    | test            | t  |      4654 |  4000
 test    |    | test            | f  |           |      
 value1  | 10 | foo             | f  |        40 |  5000
 value2  | -1 | foo1            | t  |         2 |      
 abc     |  2 | VALUES are fun! | t  |         3 |  1000
 odbc    |  1 | odbc text       | t  |       100 | 10000
 1_      |  1 | foo             | t  | -1928.121 |  1000
 2_      |  2 | varchar         | f  |      2000 |  2000
(11 rows)

--
-- TOASTed value test
--
--Testcase 165:
INSERT INTO tntbl2 VALUES(repeat('a', 255), 30, repeat('x', 255), true, 512.0, 2000);
INSERT 0 1
--Testcase 166:
SELECT c1, c3, char_length(_id), char_length(c2) FROM tntbl2;
 c1 | c3 | char_length | char_length 
----+----+-------------+-------------
    |    |             |            
    |    |           1 |            
    |    |           1 |           2
    | t  |           7 |           4
    | f  |           4 |           4
 10 | f  |           6 |           3
 -1 | t  |           6 |           4
  2 | t  |           3 |          15
 30 | t  |         255 |         255
  1 | t  |           4 |           9
  1 | t  |           2 |           3
  2 | f  |           2 |           7
(12 rows)

--
-- INSERT with IN feature, this feature not work yet
--
--Testcase 167:
INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') VALUES ('in1', 10, 'tst_in_feature', false, 5.0, 5000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') V...
                           ^
--Testcase 168:
INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/mongo_svr/') VALUES ('in2', 20, 'tst_in_feature', true, 6.0, 6000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/dyna...
                           ^
--
-- UPDATE
--
--Testcase 169:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 |    c4     |  c5   
-------------+----+-------------+----+-----------+-------
             |    |             |    |           |      
           1 |    |             |    |           |      
           1 |    |           2 |    |           |      
           7 |    |           4 | t  |      4654 |  4000
           4 |    |           4 | f  |           |      
           6 | 10 |           3 | f  |        40 |  5000
           6 | -1 |           4 | t  |         2 |      
           3 |  2 |          15 | t  |         3 |  1000
         255 | 30 |         255 | t  |       512 |  2000
           4 |  1 |           9 | t  |       100 | 10000
           2 |  1 |           3 | t  | -1928.121 |  1000
           2 |  2 |           7 | f  |      2000 |  2000
(12 rows)

--Testcase 170:
UPDATE tntbl2 SET c4 = DEFAULT;
UPDATE 12
--Testcase 171:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           7 |    |           4 | t  |    |  4000
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           6 | -1 |           4 | t  |    |      
           3 |  2 |          15 | t  |    |  1000
         255 | 30 |         255 | t  |    |  2000
           4 |  1 |           9 | t  |    | 10000
           2 |  1 |           3 | t  |    |  1000
           2 |  2 |           7 | f  |    |  2000
(12 rows)

-- aliases for the UPDATE target table
--Testcase 172:
UPDATE tntbl2 AS t SET c1 = 10 WHERE t.c5 = 1000;
UPDATE 2
--Testcase 173:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           7 |    |           4 | t  |    |  4000
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           6 | -1 |           4 | t  |    |      
         255 | 30 |         255 | t  |    |  2000
           3 | 10 |          15 | t  |    |  1000
           4 |  1 |           9 | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           2 | 10 |           3 | t  |    |  1000
(12 rows)

--Testcase 174:
UPDATE tntbl2 t SET c1 = t.c1 + 10 WHERE t.c5 = 1000;
UPDATE 2
--Testcase 175:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           7 |    |           4 | t  |    |  4000
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           6 | -1 |           4 | t  |    |      
         255 | 30 |         255 | t  |    |  2000
           3 | 20 |          15 | t  |    |  1000
           4 |  1 |           9 | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           2 | 20 |           3 | t  |    |  1000
(12 rows)

--
-- Test VALUES in FROM
--
--Testcase 176:
UPDATE tntbl2 SET c1=v.i FROM (VALUES(10, 1000)) AS v(i, j)
  WHERE tntbl2.c5 = v.j;
UPDATE 2
--Testcase 177:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           7 |    |           4 | t  |    |  4000
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           6 | -1 |           4 | t  |    |      
         255 | 30 |         255 | t  |    |  2000
           3 | 10 |          15 | t  |    |  1000
           4 |  1 |           9 | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           2 | 10 |           3 | t  |    |  1000
(12 rows)

-- fail, wrong data type:
--Testcase 178:
UPDATE tntbl2 SET c1 = v.* FROM (VALUES(1000, 10)) AS v(i, j)
  WHERE tntbl2.c5 = v.j;
ERROR:  column "c1" is of type integer but expression is of type record
LINE 1: UPDATE tntbl2 SET c1 = v.* FROM (VALUES(1000, 10)) AS v(i, j...
                               ^
HINT:  You will need to rewrite or cast the expression.
--
-- Test multiple-set-clause syntax
--
--Testcase 179:
INSERT INTO tntbl2 SELECT _id || 's#', c1 + 1, c2 || '@@' FROM tntbl2;
ERROR:  value too long for type character varying(255)
--Testcase 180:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           7 |    |           4 | t  |    |  4000
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           6 | -1 |           4 | t  |    |      
         255 | 30 |         255 | t  |    |  2000
           3 | 10 |          15 | t  |    |  1000
           4 |  1 |           9 | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           2 | 10 |           3 | t  |    |  1000
(12 rows)

--Testcase 181:
UPDATE tntbl2 SET (_id, c1, c2) = ('bugle', c1+11, DEFAULT) WHERE c3 = true;
UPDATE 6
--Testcase 182:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           4 |    |           4 | f  |    |      
           6 | 10 |           3 | f  |    |  5000
           5 |    |             | t  |    |  4000
           5 | 10 |             | t  |    |      
           5 | 41 |             | t  |    |  2000
           5 | 21 |             | t  |    |  1000
           5 | 12 |             | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           5 | 21 |             | t  |    |  1000
(12 rows)

--Testcase 183:
UPDATE tntbl2 SET (c2, c1) = ('car', c1 + c5), c4 = c4 + 10.0 WHERE c1 = 10;
UPDATE 2
--Testcase 184:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length |  c1  | char_length | c3 | c4 |  c5   
-------------+------+-------------+----+----+-------
             |      |             |    |    |      
           1 |      |             |    |    |      
           1 |      |           2 |    |    |      
           4 |      |           4 | f  |    |      
           5 |      |             | t  |    |  4000
           5 |   41 |             | t  |    |  2000
           5 |   21 |             | t  |    |  1000
           6 | 5010 |           3 | f  |    |  5000
           5 |      |           3 | t  |    |      
           5 |   12 |             | t  |    | 10000
           2 |    2 |           7 | f  |    |  2000
           5 |   21 |             | t  |    |  1000
(12 rows)

-- fail, multi assignment to same column:
--Testcase 185:
UPDATE tntbl2 SET (c2, c4) = ('car', c1 + c4), c4 = c1 + 1 WHERE c1 = 10;
ERROR:  multiple assignments to same column "c4"
-- uncorrelated sub-SELECT:
--Testcase 186:
UPDATE tntbl2 SET (c1, c5) = ROW(v.*) FROM (VALUES(20, 100)) AS v(i, j)
  SET (c1, c3) = (SELECT c1, c3 FROM tntbl2 where c1 = 1010 and c2 = 'car')
  WHERE c5 = 1000 AND c1 = 21;
ERROR:  syntax error at or near "SET"
LINE 2:   SET (c1, c3) = (SELECT c1, c3 FROM tntbl2 where c1 = 1010 ...
          ^
--Testcase 187:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length |  c1  | char_length | c3 | c4 |  c5   
-------------+------+-------------+----+----+-------
             |      |             |    |    |      
           1 |      |             |    |    |      
           1 |      |           2 |    |    |      
           4 |      |           4 | f  |    |      
           5 |      |             | t  |    |  4000
           5 |   41 |             | t  |    |  2000
           5 |   21 |             | t  |    |  1000
           6 | 5010 |           3 | f  |    |  5000
           5 |      |           3 | t  |    |      
           5 |   12 |             | t  |    | 10000
           2 |    2 |           7 | f  |    |  2000
           5 |   21 |             | t  |    |  1000
(12 rows)

-- correlated sub-SELECT:
--Testcase 188:
UPDATE tntbl2 o
  SET (c5, c1) = (SELECT c1+1, c5 FROM tntbl2 i
               where i.c1=o.c1 and i.c5=o.c5 and i.c2 is not distinct FROM o.c2);
ERROR:  more than one row returned by a subquery used as an expression
--Testcase 189:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length |  c1  | char_length | c3 | c4 |  c5   
-------------+------+-------------+----+----+-------
             |      |             |    |    |      
           1 |      |             |    |    |      
           1 |      |           2 |    |    |      
           4 |      |           4 | f  |    |      
           5 |      |             | t  |    |  4000
           5 |   41 |             | t  |    |  2000
           5 |   21 |             | t  |    |  1000
           6 | 5010 |           3 | f  |    |  5000
           5 |      |           3 | t  |    |      
           5 |   12 |             | t  |    | 10000
           2 |    2 |           7 | f  |    |  2000
           5 |   21 |             | t  |    |  1000
(12 rows)

-- fail, multiple rows supplied:
--Testcase 190:
UPDATE tntbl2 SET (c5, c1) = (SELECT c1+1, c5 FROM tntbl2);
ERROR:  more than one row returned by a subquery used as an expression
-- set to null if no rows supplied:
--Testcase 191:
UPDATE tntbl2 SET (c5 , c1) = (SELECT c1+1, c5 FROM tntbl2 where c4 = 10.0)
  WHERE c4 = 50.0;
UPDATE 0
--Testcase 192:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length |  c1  | char_length | c3 | c4 |  c5   
-------------+------+-------------+----+----+-------
             |      |             |    |    |      
           1 |      |             |    |    |      
           1 |      |           2 |    |    |      
           4 |      |           4 | f  |    |      
           5 |      |             | t  |    |  4000
           5 |   41 |             | t  |    |  2000
           5 |   21 |             | t  |    |  1000
           6 | 5010 |           3 | f  |    |  5000
           5 |      |           3 | t  |    |      
           5 |   12 |             | t  |    | 10000
           2 |    2 |           7 | f  |    |  2000
           5 |   21 |             | t  |    |  1000
(12 rows)

-- *-expansion should work in this context:
--Testcase 193:
UPDATE tntbl2 SET (c1, c5) = ROW(v.*) FROM (VALUES(20, 3)) AS v(i, j)
  WHERE tntbl2.c1 = v.j;
UPDATE 0
-- you might expect this to work, but syntactically it's not a RowExpr:
--Testcase 194:
UPDATE tntbl2 SET (c1, c5) = (v.*) FROM (VALUES(20, 3)) AS v(i, j)
  WHERE tntbl2.c1 = v.j;
ERROR:  source for a multiple-column UPDATE item must be a sub-SELECT or ROW() expression
LINE 1: UPDATE tntbl2 SET (c1, c5) = (v.*) FROM (VALUES(20, 3)) AS v...
                                      ^
-- if an alias for the target table is specified, don't allow references
-- to the original table name
--Testcase 195:
UPDATE tntbl2 AS t SET c4 = tntbl2.c4 + 10 WHERE t.c1 = 10;
ERROR:  invalid reference to FROM-clause entry for table "tntbl2"
LINE 1: UPDATE tntbl2 AS t SET c4 = tntbl2.c4 + 10 WHERE t.c1 = 10;
                                    ^
HINT:  Perhaps you meant to reference the table alias "t".
-- Make sure that we can update to a TOASTed value.
--Testcase 196:
UPDATE tntbl2 SET _id = repeat('x', 255) WHERE c2 = 'car';
UPDATE 2
--Testcase 197:
SELECT c1, char_length(c2), char_length(_id) FROM tntbl2;
  c1  | char_length | char_length 
------+-------------+-------------
      |             |            
      |             |           1
      |           2 |           1
      |           4 |           4
      |             |           5
   41 |             |           5
   21 |             |           5
 5010 |           3 |         255
      |           3 |         255
   12 |             |           5
    2 |           7 |           2
   21 |             |           5
(12 rows)

-- Check multi-assignment with a Result node to handle a one-time filter.
--Testcase 198:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE tntbl2 t
  SET (c1, c5) = (SELECT c5, c1 FROM tntbl2 s WHERE s.c1 = t.c1)
  WHERE CURRENT_USER = SESSION_USER;
                                QUERY PLAN                                
--------------------------------------------------------------------------
 Update on public.tntbl2 t
   Update on public.tntbl2 t_1
   Update on public.tntbl2__pgspider_srv__0 t_2
   Update on public.tntbl2__odbc_post_svr__0 t_3
   Update on public.tntbl2__jdbc_mysql_svr__0 t_4
   Update on public.tntbl2__mongo_svr__0 t_5
   Update on public.tntbl2__dynamodb_svr__0 t_6
   Update on public.tntbl2__griddb_svr__0 t_7
   ->  Result
         Output: $1, $2, (SubPlan 1 (returns $1,$2)), t.tableoid, t.ctid
         ->  Append
               ->  Result
                     Output: t_1.c1, t_1.tableoid, t_1.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2 t_1
                           Output: t_1.c1, t_1.tableoid, t_1.ctid
               ->  Result
                     Output: t_2.c1, t_2.tableoid, t_2.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__pgspider_srv__0 t_2
                           Output: t_2.c1, t_2.tableoid, t_2.ctid
               ->  Result
                     Output: t_3.c1, t_3.tableoid, t_3.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__odbc_post_svr__0 t_3
                           Output: t_3.c1, t_3.tableoid, t_3.ctid
               ->  Result
                     Output: t_4.c1, t_4.tableoid, t_4.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__jdbc_mysql_svr__0 t_4
                           Output: t_4.c1, t_4.tableoid, t_4.ctid
               ->  Result
                     Output: t_5.c1, t_5.tableoid, t_5.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__mongo_svr__0 t_5
                           Output: t_5.c1, t_5.tableoid, t_5.ctid
               ->  Result
                     Output: t_6.c1, t_6.tableoid, t_6.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__dynamodb_svr__0 t_6
                           Output: t_6.c1, t_6.tableoid, t_6.ctid
               ->  Result
                     Output: t_7.c1, t_7.tableoid, t_7.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl2__griddb_svr__0 t_7
                           Output: t_7.c1, t_7.tableoid, t_7.ctid
         SubPlan 1 (returns $1,$2)
           ->  Append
                 ->  Seq Scan on public.tntbl2 s_1
                       Output: s_1.c5, s_1.c1
                       Filter: (s_1.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__pgspider_srv__0 s_2
                       Output: s_2.c5, s_2.c1
                       Filter: (s_2.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__odbc_post_svr__0 s_3
                       Output: s_3.c5, s_3.c1
                       Filter: (s_3.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__jdbc_mysql_svr__0 s_4
                       Output: s_4.c5, s_4.c1
                       Filter: (s_4.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__mongo_svr__0 s_5
                       Output: s_5.c5, s_5.c1
                       Filter: (s_5.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__dynamodb_svr__0 s_6
                       Output: s_6.c5, s_6.c1
                       Filter: (s_6.c1 = t.c1)
                 ->  Seq Scan on public.tntbl2__griddb_svr__0 s_7
                       Output: s_7.c5, s_7.c1
                       Filter: (s_7.c1 = t.c1)
(69 rows)

--Testcase 199:
UPDATE tntbl2 t
  SET (c1, c5) = (SELECT c5, c1 FROM tntbl2 s WHERE s.c1 = t.c1)
  WHERE CURRENT_USER = SESSION_USER;
ERROR:  more than one row returned by a subquery used as an expression
--Testcase 200:
SELECT c1, c5, char_length(c2) FROM tntbl2;
  c1  |  c5   | char_length 
------+-------+-------------
      |       |            
      |       |            
      |       |           2
      |       |           4
      |  4000 |            
   41 |  2000 |            
   21 |  1000 |            
 5010 |  5000 |           3
      |       |           3
   12 | 10000 |            
    2 |  2000 |           7
   21 |  1000 |            
(12 rows)

--
-- UPDATE with IN feature
--
--Testcase 201:
UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') SET c4 = 56563.1212;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') SET c4...
                      ^
--Testcase 202:
UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/odbc_post_svr/', '/pgspider_core_svr/pgspider_svr/jdbc_mysql_svr/') SET c4 = 22.2;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/odbc_post...
                      ^
--
-- DELETE
--
-- allow an alias to be specified for DELETE's target table
--Testcase 203:
DELETE FROM tntbl2 AS dt WHERE dt.c1 > 75;
DELETE 1
-- if an alias is specified, don't allow the original table name
-- to be referenced
--Testcase 204:
DELETE FROM tntbl2 dt WHERE tntbl2.c1 > 25;
ERROR:  invalid reference to FROM-clause entry for table "tntbl2"
LINE 1: DELETE FROM tntbl2 dt WHERE tntbl2.c1 > 25;
                                    ^
HINT:  Perhaps you meant to reference the table alias "dt".
--Testcase 205:
SELECT char_length(_id), c1, char_length(c2) FROM tntbl2;
 char_length | c1 | char_length 
-------------+----+-------------
             |    |            
           1 |    |            
           1 |    |           2
           4 |    |           4
           5 |    |            
           5 | 41 |            
           5 | 21 |            
         255 |    |           3
           5 | 12 |            
           2 |  2 |           7
           5 | 21 |            
(11 rows)

-- delete a row with a TOASTed value
--Testcase 206:
DELETE FROM tntbl2 WHERE c2 = 'car';
DELETE 1
--Testcase 207:
SELECT c1, char_length(_id) FROM tntbl2;
 c1 | char_length 
----+-------------
    |            
    |           1
    |           1
    |           4
    |           5
 41 |           5
 21 |           5
 12 |           5
  2 |           2
 21 |           5
(10 rows)

--
-- DELETE with IN feature
--
--Testcase 208:
DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') WHERE c1 = 10;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') W...
                           ^
--Testcase 209:
DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/odbc_post_svr/', '/pgspider_core_svr/pgspider_svr/griddb_svr/') WHERE c5 = 4000;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/dyna...
                           ^
-- *** Finish test for tntbl2 *** --
-----------------------------------------------------------------------------------
-- *** Start test for tntbl3 *** --
--
-- INSERT
-- insert with DEFAULT in the target_list
--
--Testcase 210:
INSERT INTO tntbl3 (_id, c1, c2, c3, c4) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 211:
INSERT INTO tntbl3 (_id, c2, c3) VALUES ('_3', 3.0, DEFAULT);
INSERT 0 1
--Testcase 212:
INSERT INTO tntbl3 (_id, c1, c2, c3) VALUES ('_4', DEFAULT, 5.0, DEFAULT);
INSERT 0 1
--Testcase 213:
INSERT INTO tntbl3 VALUES ('test1', DEFAULT, 5.0, 600.0, 1000);
INSERT 0 1
--Testcase 214:
INSERT INTO tntbl3 VALUES ('test2', DEFAULT, 7.0);
INSERT 0 1
--Testcase 215:
SELECT * FROM tntbl3;
      _id       | c1 |  c2   |  c3  |  c4   
----------------+----+-------+------+-------
                |    |       |      |      
 _3             |    |     3 |      |      
 _4             |    |     5 |      |      
 test1          |    |     5 |  600 |  1000
 test2          |    |     7 |      |      
 jdbc           | 10 |    10 | 1000 | 10000
 11_            |  1 | -19.1 | 1000 |      
 22_            |  2 |  2000 | 2000 |      
 text_post_id   |  1 |     1 |  100 |  1000
 text_tiny      |  1 |     1 |  100 |  1000
 text_sqlite_id |  1 |     1 |  100 |  1000
(11 rows)

--
-- insert with similar expression / target_list VALUES (all fail)
--
--Testcase 216:
INSERT INTO tntbl3 (_id, c1, c2, c3) VALUES ('wrong1', DEFAULT, DEFAULT);
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl3 (_id, c1, c2, c3) VALUES ('wrong1', DEFAU...
                                         ^
--Testcase 217:
INSERT INTO tntbl3 (_id, c1, c2, c3) VALUES ('wrong2', 1, 2.0);
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl3 (_id, c1, c2, c3) VALUES ('wrong2', 1, 2....
                                         ^
--Testcase 218:
INSERT INTO tntbl3 (_id, c1) VALUES ('wrong3', 1, 2);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl3 (_id, c1) VALUES ('wrong3', 1, 2);
                                                          ^
--Testcase 219:
INSERT INTO tntbl3 (_id, c1) VALUES ('wrong4',DEFAULT, DEFAULT);
ERROR:  INSERT has more expressions than target columns
LINE 1: ...RT INTO tntbl3 (_id, c1) VALUES ('wrong4',DEFAULT, DEFAULT);
                                                              ^
--Testcase 220:
SELECT * FROM tntbl3;
      _id       | c1 |  c2   |  c3  |  c4   
----------------+----+-------+------+-------
                |    |       |      |      
 _3             |    |     3 |      |      
 _4             |    |     5 |      |      
 test1          |    |     5 |  600 |  1000
 test2          |    |     7 |      |      
 jdbc           | 10 |    10 | 1000 | 10000
 11_            |  1 | -19.1 | 1000 |      
 22_            |  2 |  2000 | 2000 |      
 text_post_id   |  1 |     1 |  100 |  1000
 text_tiny      |  1 |     1 |  100 |  1000
 text_sqlite_id |  1 |     1 |  100 |  1000
(11 rows)

--
-- VALUES test
--
--Testcase 221:
INSERT INTO tntbl3 VALUES('test1', 10, 2.0, 20.0, 2000), ('test2', -1, 2.0, DEFAULT, 3000),
    ((SELECT 'test3'), (SELECT 90), (SELECT i FROM (VALUES(3.0)) as foo (i)), 30.0, 4000);
INSERT 0 3
--Testcase 222:
SELECT * FROM tntbl3;
      _id       | c1 |  c2   |  c3  |  c4   
----------------+----+-------+------+-------
                |    |       |      |      
 _3             |    |     3 |      |      
 _4             |    |     5 |      |      
 test1          |    |     5 |  600 |  1000
 test2          |    |     7 |      |      
 test1          | 10 |     2 |   20 |  2000
 test2          | -1 |     2 |      |  3000
 test3          | 90 |     3 |   30 |  4000
 jdbc           | 10 |    10 | 1000 | 10000
 11_            |  1 | -19.1 | 1000 |      
 22_            |  2 |  2000 | 2000 |      
 text_post_id   |  1 |     1 |  100 |  1000
 text_tiny      |  1 |     1 |  100 |  1000
 text_sqlite_id |  1 |     1 |  100 |  1000
(14 rows)

--
-- TOASTed value test
--
--Testcase 223:
INSERT INTO tntbl3 VALUES(repeat('x', 255), 20, 4.0, 40.0, 5000);
INSERT 0 1
--Testcase 224:
SELECT c1, c2, char_length(_id) FROM tntbl3;
 c1 |  c2   | char_length 
----+-------+-------------
    |       |            
    |     3 |           2
    |     5 |           2
    |     5 |           5
    |     7 |           5
 10 |     2 |           5
 -1 |     2 |           5
 90 |     3 |           5
 20 |     4 |         255
 10 |    10 |           4
  1 | -19.1 |           3
  2 |  2000 |           3
  1 |     1 |          12
  1 |     1 |           9
  1 |     1 |          14
(15 rows)

--
-- INSERT with IN feature, this feature not work yet
--
--Testcase 225:
INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') VALUES ('_test', 10, 5.0, 50.0, 5000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') V...
                           ^
--Testcase 226:
INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/mongo_svr/', '/pgspider_core_svr/pgspider_svr/griddb_svr/', '/pgspider_core_svr/pgspider_svr/mysql_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr_1/') VALUES ('_infea', 20, 6.0, 60.0, 6000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dyna...
                           ^
--
-- UPDATE
--
--Testcase 227:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   |  c3  |  c4   
-------------+----+-------+------+-------
             |    |       |      |      
           2 |    |     3 |      |      
           2 |    |     5 |      |      
           5 |    |     5 |  600 |  1000
           5 |    |     7 |      |      
           5 | 10 |     2 |   20 |  2000
           5 | -1 |     2 |      |  3000
           5 | 90 |     3 |   30 |  4000
         255 | 20 |     4 |   40 |  5000
           4 | 10 |    10 | 1000 | 10000
           3 |  1 | -19.1 | 1000 |      
           3 |  2 |  2000 | 2000 |      
          12 |  1 |     1 |  100 |  1000
           9 |  1 |     1 |  100 |  1000
          14 |  1 |     1 |  100 |  1000
(15 rows)

--Testcase 228:
UPDATE tntbl3 SET c3 = DEFAULT, c4 = DEFAULT;
UPDATE 15
--Testcase 229:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 10 |     2 |    |   
           5 | -1 |     2 |    |   
           5 | 90 |     3 |    |   
         255 | 20 |     4 |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(15 rows)

-- aliases for the UPDATE target table
--Testcase 230:
UPDATE tntbl3 AS t SET c1 = 10 WHERE t.c2 = 2.0;
UPDATE 2
--Testcase 231:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
         255 | 20 |     4 |    |   
           5 | 10 |     2 |    |   
           5 | 10 |     2 |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(15 rows)

--Testcase 232:
UPDATE tntbl3 t SET c1 = t.c1 + 10 WHERE t.c2 = 4.0;
UPDATE 1
--Testcase 233:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
           5 | 10 |     2 |    |   
           5 | 10 |     2 |    |   
         255 | 30 |     4 |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(15 rows)

--
-- Test VALUES in FROM
--
--Testcase 234:
UPDATE tntbl3 SET c1=v.i FROM (VALUES(100, 5)) AS v(i, j)
  WHERE tntbl3.c1 = v.j;
UPDATE 0
--Testcase 235:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
           5 | 10 |     2 |    |   
           5 | 10 |     2 |    |   
         255 | 30 |     4 |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(15 rows)

-- fail, wrong data type:
--Testcase 236:
UPDATE tntbl3 SET c1 = v.* FROM (VALUES(100, 2000)) AS v(i, j)
  WHERE tntbl3.c4 = v.j;
ERROR:  column "c1" is of type integer but expression is of type record
LINE 1: UPDATE tntbl3 SET c1 = v.* FROM (VALUES(100, 2000)) AS v(i, ...
                               ^
HINT:  You will need to rewrite or cast the expression.
--
-- Test multiple-set-clause syntax
--
--Testcase 237:
INSERT INTO tntbl3 SELECT _id || '1', c1 + 1, c2 + 1, c3 FROM tntbl3;
INSERT 0 15
--Testcase 238:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
           5 | 10 |     2 |    |   
           5 | 10 |     2 |    |   
         255 | 30 |     4 |    |   
             |    |       |    |   
           3 |    |     4 |    |   
           3 |    |     6 |    |   
           6 |    |     6 |    |   
           6 |    |     8 |    |   
           6 | 91 |     4 |    |   
           6 | 11 |     3 |    |   
           6 | 11 |     3 |    |   
         256 | 31 |     5 |    |   
           5 | 11 |    11 |    |   
           4 |  2 | -18.1 |    |   
           4 |  3 |  2001 |    |   
          13 |  2 |     2 |    |   
          10 |  2 |     2 |    |   
          15 |  2 |     2 |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(30 rows)

--Testcase 239:
UPDATE tntbl3 SET (_id, c1, c2) = ('bugle', c1 + 11, DEFAULT) WHERE c2 = 2.0;
UPDATE 5
--Testcase 240:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
         255 | 30 |     4 |    |   
             |    |       |    |   
           3 |    |     4 |    |   
           3 |    |     6 |    |   
           6 |    |     6 |    |   
           6 |    |     8 |    |   
           6 | 91 |     4 |    |   
           6 | 11 |     3 |    |   
           6 | 11 |     3 |    |   
         256 | 31 |     5 |    |   
           5 | 11 |    11 |    |   
           4 |  2 | -18.1 |    |   
           4 |  3 |  2001 |    |   
           5 | 21 |       |    |   
           5 | 21 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           4 | 10 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(30 rows)

--Testcase 241:
UPDATE tntbl3 SET (_id, c3) = ('car1', c2 + c3), c1 = c1 + 1 WHERE c1 = 10;
UPDATE 1
--Testcase 242:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
         255 | 30 |     4 |    |   
             |    |       |    |   
           3 |    |     4 |    |   
           3 |    |     6 |    |   
           6 |    |     6 |    |   
           6 |    |     8 |    |   
           6 | 91 |     4 |    |   
           6 | 11 |     3 |    |   
           6 | 11 |     3 |    |   
         256 | 31 |     5 |    |   
           5 | 11 |    11 |    |   
           4 |  2 | -18.1 |    |   
           4 |  3 |  2001 |    |   
           5 | 21 |       |    |   
           5 | 21 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           4 | 11 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(30 rows)

-- fail, multi assignment to same column:
--Testcase 243:
UPDATE tntbl3 SET (_id, c2) = ('car2', c2 + c3), c2 = c1 + 1 WHERE c4 = 3000;
ERROR:  multiple assignments to same column "c2"
-- uncorrelated sub-SELECT:
--Testcase 244:
UPDATE tntbl3
  SET (c2, c3) = (SELECT c3, c2 FROM tntbl3 where c1 = 11 and _id = 'car1')
  WHERE c2 = 2.0 AND c3 = 20.0;
UPDATE 0
--Testcase 245:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 |  c2   | c3 | c4 
-------------+----+-------+----+----
             |    |       |    |   
           2 |    |     3 |    |   
           2 |    |     5 |    |   
           5 |    |     5 |    |   
           5 |    |     7 |    |   
           5 | 90 |     3 |    |   
         255 | 30 |     4 |    |   
             |    |       |    |   
           3 |    |     4 |    |   
           3 |    |     6 |    |   
           6 |    |     6 |    |   
           6 |    |     8 |    |   
           6 | 91 |     4 |    |   
           6 | 11 |     3 |    |   
           6 | 11 |     3 |    |   
         256 | 31 |     5 |    |   
           5 | 11 |    11 |    |   
           4 |  2 | -18.1 |    |   
           4 |  3 |  2001 |    |   
           5 | 21 |       |    |   
           5 | 21 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           5 | 13 |       |    |   
           4 | 11 |    10 |    |   
           3 |  1 | -19.1 |    |   
           3 |  2 |  2000 |    |   
          12 |  1 |     1 |    |   
           9 |  1 |     1 |    |   
          14 |  1 |     1 |    |   
(30 rows)

-- correlated sub-SELECT:
--Testcase 246:
UPDATE tntbl3 o
  SET (c2, c3) = (SELECT c3+1, c2 FROM tntbl3 i
               where i.c3 = o.c3 and i.c2 = o.c2 and i.c1 is not distinct FROM o.c1);
UPDATE 30
--Testcase 247:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 | c2 | c3 | c4 
-------------+----+----+----+----
             |    |    |    |   
           2 |    |    |    |   
           2 |    |    |    |   
           5 |    |    |    |   
           5 |    |    |    |   
           5 | 90 |    |    |   
         255 | 30 |    |    |   
             |    |    |    |   
           3 |    |    |    |   
           3 |    |    |    |   
           6 |    |    |    |   
           6 |    |    |    |   
           6 | 91 |    |    |   
           6 | 11 |    |    |   
           6 | 11 |    |    |   
         256 | 31 |    |    |   
           5 | 11 |    |    |   
           4 |  2 |    |    |   
           4 |  3 |    |    |   
           5 | 21 |    |    |   
           5 | 21 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
           4 | 11 |    |    |   
           3 |  1 |    |    |   
           3 |  2 |    |    |   
          12 |  1 |    |    |   
           9 |  1 |    |    |   
          14 |  1 |    |    |   
(30 rows)

-- fail, multiple rows supplied:
--Testcase 248:
UPDATE tntbl3 SET (c3, c2) = (SELECT c2 + 1 , c3 FROM tntbl3);
ERROR:  more than one row returned by a subquery used as an expression
-- set to null if no rows supplied:
--Testcase 249:
UPDATE tntbl3 SET (c3, c2) = (SELECT c2 + 1, c3 FROM tntbl3 where c4 = 1000)
  WHERE c1 = 11;
UPDATE 4
--Testcase 250:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 | c2 | c3 | c4 
-------------+----+----+----+----
             |    |    |    |   
           2 |    |    |    |   
           2 |    |    |    |   
           5 |    |    |    |   
           5 |    |    |    |   
           5 | 90 |    |    |   
         255 | 30 |    |    |   
             |    |    |    |   
           3 |    |    |    |   
           3 |    |    |    |   
           6 |    |    |    |   
           6 |    |    |    |   
           6 | 91 |    |    |   
         256 | 31 |    |    |   
           4 |  2 |    |    |   
           4 |  3 |    |    |   
           5 | 21 |    |    |   
           5 | 21 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
           6 | 11 |    |    |   
           6 | 11 |    |    |   
           5 | 11 |    |    |   
           4 | 11 |    |    |   
           3 |  1 |    |    |   
           3 |  2 |    |    |   
          12 |  1 |    |    |   
           9 |  1 |    |    |   
          14 |  1 |    |    |   
(30 rows)

-- *-expansion should work in this context:
--Testcase 251:
UPDATE tntbl3 SET (c1, c3) = ROW(v.*) FROM (VALUES(11, 20)) AS v(i, j)
  WHERE tntbl3.c1 = v.i;
UPDATE 4
-- you might expect this to work, but syntactically it's not a RowExpr:
--Testcase 252:
UPDATE tntbl3 SET (c1, c3) = (v.*) FROM (VALUES(11, 20)) AS v(i, j)
  WHERE tntbl3.c1 = v.i;
ERROR:  source for a multiple-column UPDATE item must be a sub-SELECT or ROW() expression
LINE 1: UPDATE tntbl3 SET (c1, c3) = (v.*) FROM (VALUES(11, 20)) AS ...
                                      ^
-- if an alias for the target table is specified, don't allow references
-- to the original table name
--Testcase 253:
UPDATE tntbl3 AS t SET c1 = tntbl3.c1 + 10 WHERE t.c2 = 2.0;
ERROR:  invalid reference to FROM-clause entry for table "tntbl3"
LINE 1: UPDATE tntbl3 AS t SET c1 = tntbl3.c1 + 10 WHERE t.c2 = 2.0;
                                    ^
HINT:  Perhaps you meant to reference the table alias "t".
-- Make sure that we can update to a TOASTed value.
--Testcase 254:
UPDATE tntbl3 SET _id = repeat('x', 255) WHERE c1 = 11;
UPDATE 4
--Testcase 255:
SELECT c1, c2, char_length(_id) FROM tntbl3;
 c1 | c2 | char_length 
----+----+-------------
    |    |            
    |    |           2
    |    |           2
    |    |           5
    |    |           5
 90 |    |           5
 30 |    |         255
    |    |            
    |    |           3
    |    |           3
    |    |           6
    |    |           6
 91 |    |           6
 31 |    |         256
  2 |    |           4
  3 |    |           4
 21 |    |           5
 21 |    |           5
 13 |    |           5
 13 |    |           5
 13 |    |           5
 11 |    |         255
 11 |    |         255
 11 |    |         255
 11 |    |         255
  1 |    |           3
  2 |    |           3
  1 |    |          12
  1 |    |           9
  1 |    |          14
(30 rows)

-- Check multi-assignment with a Result node to handle a one-time filter.
--Testcase 256:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE tntbl3 t
  SET (c2, c3) = (SELECT c3, c2 FROM tntbl3 s WHERE s.c2 = t.c2)
  WHERE CURRENT_USER = SESSION_USER;
                                QUERY PLAN                                
--------------------------------------------------------------------------
 Update on public.tntbl3 t
   Update on public.tntbl3 t_1
   Update on public.tntbl3__pgspider_srv__0 t_2
   Update on public.tntbl3__jdbc_post_svr__0 t_3
   Update on public.tntbl3__odbc_mysql_svr__0 t_4
   Update on public.tntbl3__mongo_svr__0 t_5
   Update on public.tntbl3__dynamodb_svr__0 t_6
   Update on public.tntbl3__griddb_svr__0 t_7
   Update on public.tntbl3__postgres_svr__0 t_8
   Update on public.tntbl3__mysql_svr__0 t_9
   Update on public.tntbl3__tiny_svr__0 t_10
   Update on public.tntbl3__oracle_svr__0 t_11
   Update on public.tntbl3__sqlite_svr__0 t_12
   Update on public.tntbl3__postgres_svr__1 t_13
   ->  Result
         Output: $1, $2, (SubPlan 1 (returns $1,$2)), t.tableoid, t.ctid
         ->  Append
               ->  Result
                     Output: t_1.c2, t_1.tableoid, t_1.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3 t_1
                           Output: t_1.c2, t_1.tableoid, t_1.ctid
               ->  Result
                     Output: t_2.c2, t_2.tableoid, t_2.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__pgspider_srv__0 t_2
                           Output: t_2.c2, t_2.tableoid, t_2.ctid
               ->  Result
                     Output: t_3.c2, t_3.tableoid, t_3.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__jdbc_post_svr__0 t_3
                           Output: t_3.c2, t_3.tableoid, t_3.ctid
               ->  Result
                     Output: t_4.c2, t_4.tableoid, t_4.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__odbc_mysql_svr__0 t_4
                           Output: t_4.c2, t_4.tableoid, t_4.ctid
               ->  Result
                     Output: t_5.c2, t_5.tableoid, t_5.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__mongo_svr__0 t_5
                           Output: t_5.c2, t_5.tableoid, t_5.ctid
               ->  Result
                     Output: t_6.c2, t_6.tableoid, t_6.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__dynamodb_svr__0 t_6
                           Output: t_6.c2, t_6.tableoid, t_6.ctid
               ->  Result
                     Output: t_7.c2, t_7.tableoid, t_7.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__griddb_svr__0 t_7
                           Output: t_7.c2, t_7.tableoid, t_7.ctid
               ->  Result
                     Output: t_8.c2, t_8.tableoid, t_8.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__postgres_svr__0 t_8
                           Output: t_8.c2, t_8.tableoid, t_8.ctid
               ->  Result
                     Output: t_9.c2, t_9.tableoid, t_9.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__mysql_svr__0 t_9
                           Output: t_9.c2, t_9.tableoid, t_9.ctid
               ->  Result
                     Output: t_10.c2, t_10.tableoid, t_10.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__tiny_svr__0 t_10
                           Output: t_10.c2, t_10.tableoid, t_10.ctid
               ->  Result
                     Output: t_11.c2, t_11.tableoid, t_11.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__oracle_svr__0 t_11
                           Output: t_11.c2, t_11.tableoid, t_11.ctid
               ->  Result
                     Output: t_12.c2, t_12.tableoid, t_12.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__sqlite_svr__0 t_12
                           Output: t_12.c2, t_12.tableoid, t_12.ctid
               ->  Result
                     Output: t_13.c2, t_13.tableoid, t_13.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl3__postgres_svr__1 t_13
                           Output: t_13.c2, t_13.tableoid, t_13.ctid
         SubPlan 1 (returns $1,$2)
           ->  Append
                 ->  Seq Scan on public.tntbl3 s_1
                       Output: s_1.c3, s_1.c2
                       Filter: (s_1.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__pgspider_srv__0 s_2
                       Output: s_2.c3, s_2.c2
                       Filter: (s_2.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__jdbc_post_svr__0 s_3
                       Output: s_3.c3, s_3.c2
                       Filter: (s_3.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__odbc_mysql_svr__0 s_4
                       Output: s_4.c3, s_4.c2
                       Filter: (s_4.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__mongo_svr__0 s_5
                       Output: s_5.c3, s_5.c2
                       Filter: (s_5.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__dynamodb_svr__0 s_6
                       Output: s_6.c3, s_6.c2
                       Filter: (s_6.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__griddb_svr__0 s_7
                       Output: s_7.c3, s_7.c2
                       Filter: (s_7.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__postgres_svr__0 s_8
                       Output: s_8.c3, s_8.c2
                       Filter: (s_8.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__mysql_svr__0 s_9
                       Output: s_9.c3, s_9.c2
                       Filter: (s_9.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__tiny_svr__0 s_10
                       Output: s_10.c3, s_10.c2
                       Filter: (s_10.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__oracle_svr__0 s_11
                       Output: s_11.c3, s_11.c2
                       Filter: (s_11.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__sqlite_svr__0 s_12
                       Output: s_12.c3, s_12.c2
                       Filter: (s_12.c2 = t.c2)
                 ->  Seq Scan on public.tntbl3__postgres_svr__1 s_13
                       Output: s_13.c3, s_13.c2
                       Filter: (s_13.c2 = t.c2)
(123 rows)

--Testcase 257:
UPDATE tntbl3 t
  SET (c2, c3) = (SELECT c3, c2 FROM tntbl3 s WHERE s.c2 = t.c2)
  WHERE CURRENT_USER = SESSION_USER;
UPDATE 30
--Testcase 258:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 | c2 | c3 | c4 
-------------+----+----+----+----
             |    |    |    |   
           2 |    |    |    |   
           2 |    |    |    |   
           5 |    |    |    |   
           5 |    |    |    |   
           5 | 90 |    |    |   
         255 | 30 |    |    |   
             |    |    |    |   
           3 |    |    |    |   
           3 |    |    |    |   
           6 |    |    |    |   
           6 |    |    |    |   
           6 | 91 |    |    |   
         256 | 31 |    |    |   
           4 |  2 |    |    |   
           4 |  3 |    |    |   
           5 | 21 |    |    |   
           5 | 21 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
           5 | 13 |    |    |   
         255 | 11 |    |    |   
         255 | 11 |    |    |   
         255 | 11 |    |    |   
         255 | 11 |    |    |   
           3 |  1 |    |    |   
           3 |  2 |    |    |   
          12 |  1 |    |    |   
           9 |  1 |    |    |   
          14 |  1 |    |    |   
(30 rows)

--
-- UPDATE with IN feature
--
--Testcase 259:
UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') SET c3 = 56563.0;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') SET c3...
                      ^
--Testcase 260:
UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/jdbc_post_svr/', '/pgspider_core_svr/pgspider_svr/odbc_mysql_svr/', '/pgspider_core_svr/pgspider_svr/oracle_svr/') SET c3 = 222.0;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/jdbc_post...
                      ^
--
-- DELETE
--
-- allow an alias to be specified for DELETE's target table
--Testcase 261:
DELETE FROM tntbl3 AS dt WHERE dt.c1 > 35;
DELETE 2
-- if an alias is specified, don't allow the original table name
-- to be referenced
--Testcase 262:
DELETE FROM tntbl3 dt WHERE tntbl3.c1 > 25;
ERROR:  invalid reference to FROM-clause entry for table "tntbl3"
LINE 1: DELETE FROM tntbl3 dt WHERE tntbl3.c1 > 25;
                                    ^
HINT:  Perhaps you meant to reference the table alias "dt".
--Testcase 263:
SELECT c1, c3, char_length(_id) FROM tntbl3;
 c1 | c3 | char_length 
----+----+-------------
    |    |            
    |    |           2
    |    |           2
    |    |           5
    |    |           5
 30 |    |         255
    |    |            
    |    |           3
    |    |           3
    |    |           6
    |    |           6
 31 |    |         256
  2 |    |           4
  3 |    |           4
 21 |    |           5
 21 |    |           5
 13 |    |           5
 13 |    |           5
 13 |    |           5
 11 |    |         255
 11 |    |         255
 11 |    |         255
 11 |    |         255
  1 |    |           3
  2 |    |           3
  1 |    |          12
  1 |    |           9
  1 |    |          14
(28 rows)

-- delete a row with a TOASTed value
--Testcase 264:
DELETE FROM tntbl3 WHERE c1 > 10;
DELETE 11
--Testcase 265:
SELECT c1, c3, char_length(_id) FROM tntbl3;
 c1 | c3 | char_length 
----+----+-------------
    |    |            
    |    |           2
    |    |           2
    |    |           5
    |    |           5
    |    |            
    |    |           3
    |    |           3
    |    |           6
    |    |           6
  2 |    |           4
  3 |    |           4
  1 |    |           3
  2 |    |           3
  1 |    |          12
  1 |    |           9
  1 |    |          14
(17 rows)

--
-- DELETE with IN feature
--
--Testcase 266:
DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') WHERE c1 = 10;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') W...
                           ^
--Testcase 267:
DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/odbc_mysql_svr/', '/pgspider_core_svr/pgspider_svr/griddb_svr/', '/pgspider_core_svr/pgspider_svr/oracle_svr/', '/pgspider_core_svr/pgspider_svr/tiny_svr/') WHERE c4 = 3000;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dyna...
                           ^
-- *** Finish test for tntbl3 *** --
-----------------------------------------------------------------------------------
-- *** Start test for tntbl4 *** --
--
-- insert with DEFAULT in the target_list
--
--Testcase 268:
INSERT INTO tntbl4 (c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 269:
INSERT INTO tntbl4 (c1, c2, c3) VALUES (3, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 270:
INSERT INTO tntbl4 (c1, c2, c3) VALUES (4, 'ANC#$', DEFAULT);
INSERT 0 1
--Testcase 271:
INSERT INTO tntbl4 VALUES (5, DEFAULT, true, 10.0, 1000, 'char array', 'char varying', 100.0, 127, '2004-10-19 10:23:54', '2004-10-19 10:23:54+02', '0001-01-01', '{ "customer": "John Does"}', '{"tags": ["tag1", "tag2"], "finished": true }', '2f404849-f62c-4234-b0c8-e230bd694045', point '(1,-45)', E'\\xa7a8a9aaabacadaeaf', B'1111111111', B'10101', interval '6 years 5 months 4 days 3 hours 2 minutes 1 second');
INSERT 0 1
--Testcase 272:
INSERT INTO tntbl4 VALUES (6, 'test', false, DEFAULT, 2000, 'test', 'test', 200.0, 0);
INSERT 0 1
--Testcase 273:
SELECT * FROM tntbl4;
 c1 |    c2    | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+----------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 | ANC#$    |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |          | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 | test     | f  |     |  2000 | test                                                                                                                                                                                                                                                            | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 | text     | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 | texttext | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(7 rows)

--
-- insert with similar expression / target_list VALUES (all fail)
--
--Testcase 274:
INSERT INTO tntbl4 (c1, c2, c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
ERROR:  INSERT has more target columns than expressions
LINE 1: ...c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20) VALUE...
                                                             ^
--Testcase 275:
INSERT INTO tntbl4 (c1, c2, c3) VALUES (1, 'ex');
ERROR:  INSERT has more target columns than expressions
LINE 1: INSERT INTO tntbl4 (c1, c2, c3) VALUES (1, 'ex');
                                    ^
--Testcase 276:
INSERT INTO tntbl4 (c1) VALUES (1, 2);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl4 (c1) VALUES (1, 2);
                                           ^
--Testcase 277:
INSERT INTO tntbl4 (c1) VALUES (DEFAULT, DEFAULT);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO tntbl4 (c1) VALUES (DEFAULT, DEFAULT);
                                                 ^
--Testcase 278:
SELECT * FROM tntbl4;
 c1 |    c2    | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+----------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 | ANC#$    |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |          | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 | test     | f  |     |  2000 | test                                                                                                                                                                                                                                                            | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 | text     | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 | texttext | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(7 rows)

--
-- VALUES test
--
--Testcase 279:
INSERT INTO tntbl4 VALUES(10, '40', true, 2.0, 2000, 'value 1'), (-1, DEFAULT, true, 4.0, 4000, 'value 2'),
    ((SELECT 20), 'fun!', false, (SELECT i FROM (VALUES(3.0)) as foo (i)), 3000, 'VALUES are fun!');
INSERT 0 3
--Testcase 280:
SELECT * FROM tntbl4;
 c1 |    c2    | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+----------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |          |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 | ANC#$    |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |          | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 | test     | f  |     |  2000 | test                                                                                                                                                                                                                                                            | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 | 40       | t  |   2 |  2000 | value 1                                                                                                                                                                                                                                                         |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 -1 |          | t  |   4 |  4000 | value 2                                                                                                                                                                                                                                                         |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 | fun!     | f  |   3 |  3000 | VALUES are fun!                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 | text     | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 | texttext | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(10 rows)

--
-- TOASTed value test
--
--Testcase 281:
INSERT INTO tntbl4 VALUES(30, repeat('x', 255));
INSERT 0 1
--Testcase 282:
SELECT c1, c3, char_length(c2) FROM tntbl4;
 c1 | c3 | char_length 
----+----+-------------
    |    |            
  3 |    |            
  4 |    |           5
  5 | t  |            
  6 | f  |           4
 10 | t  |           2
 -1 | t  |            
 20 | f  |           4
 30 |    |         255
 10 | t  |           4
 20 | f  |           8
(11 rows)

--
-- INSERT with IN feature, this feature not work yet
--
--Testcase 283:
INSERT INTO tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') VALUES (12, '_test', true, 5.0, 5000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') V...
                           ^
--Testcase 284:
INSERT INTO tntbl4 IN ('/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr_2/') VALUES (13, '_infea', true, 6.0, 6000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl4 IN ('/pgspider_core_svr/pgspider_svr/post...
                           ^
--
-- UPDATE
--
--Testcase 285:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   |                                                                                                                               c6                                                                                                                                |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |             |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |             | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 |           4 | f  |     |  2000 | test                                                                                                                                                                                                                                                            | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           2 | t  |   2 |  2000 | value 1                                                                                                                                                                                                                                                         |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 -1 |             | t  |   4 |  4000 | value 2                                                                                                                                                                                                                                                         |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           4 | f  |   3 |  3000 | VALUES are fun!                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |         255 |    |     |       |                                                                                                                                                                                                                                                                 |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           4 | t  |  10 |  1000 | char array                                                                                                                                                                                                                                                      | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 |           8 | f  | -10 | -1000 | char array                                                                                                                                                                                                                                                      | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(11 rows)

--Testcase 286:
UPDATE tntbl4 SET c3 = DEFAULT, c6 = DEFAULT;
UPDATE 11
--Testcase 287:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           4 |    |   3 |  3000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 |           8 |    | -10 | -1000 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(11 rows)

-- aliases for the UPDATE target table
--Testcase 288:
UPDATE tntbl4 AS t SET c5 = 10000 WHERE t.c1 = 20;
UPDATE 2
--Testcase 289:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           4 |    |   3 | 10000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 |           8 |    | -10 | 10000 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(11 rows)

--Testcase 290:
UPDATE tntbl4 t SET c5 = t.c5 + 10 WHERE t.c1 = 20;
UPDATE 2
--Testcase 291:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  6 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           4 |    |   3 | 10010 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(11 rows)

--
-- Test VALUES in FROM
--
--Testcase 292:
UPDATE tntbl4 SET c1 = v.i FROM (VALUES(100, 2000)) AS v(i, j)
  WHERE tntbl4.c5 = v.j;
UPDATE 2
--Testcase 293:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           4 |    |   3 | 10010 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(11 rows)

-- fail, wrong data type:
--Testcase 294:
UPDATE tntbl4 SET c1 = v.* FROM (VALUES(100, 2000)) AS v(i, j)
  WHERE tntbl4.c5 = v.j;
ERROR:  column "c1" is of type integer but expression is of type record
LINE 1: UPDATE tntbl4 SET c1 = v.* FROM (VALUES(100, 2000)) AS v(i, ...
                               ^
HINT:  You will need to rewrite or cast the expression.
--
-- Test multiple-set-clause syntax
--
--Testcase 295:
INSERT INTO tntbl4 SELECT c1 + 10, c2 || 'next', c3 != true FROM tntbl4;
INSERT 0 11
--Testcase 296:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           4 |    |   3 | 10010 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |          12 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

--Testcase 297:
UPDATE tntbl4 SET (c2 , c1, c4) = ('bugle', c1 + 10, DEFAULT) WHERE c2 = 'fun!';
UPDATE 1
--Testcase 298:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |         255 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |          12 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  30 |           5 |    |     | 10010 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

--Testcase 299:
UPDATE tntbl4 SET (c2, c5) = ('car', c1 + c5), c1 = c1 + 10 WHERE c1 = 30;
UPDATE 4
--Testcase 300:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     | 10040 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

-- fail, multi assignment to same column:
--Testcase 301:
UPDATE tntbl4 SET (c6, c8) = ('car', c4 + c8), c8 = c4 + 1.0 WHERE c1 = 40;
ERROR:  multiple assignments to same column "c8"
-- uncorrelated sub-SELECT:
--Testcase 302:
UPDATE tntbl4
  SET (c9, c1) = (SELECT c1, c9 FROM tntbl4 where c1 = 40 and c2 = 'car')
  WHERE c5 = 1000 AND c4 = 2.0;
UPDATE 0
--Testcase 303:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 127 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |   4 |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |   0 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |   2 |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     | 10040 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  12 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   1 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

-- correlated sub-SELECT:
--Testcase 304:
UPDATE tntbl4 o
  SET (c9, c4) = (SELECT c9+1, c4 FROM tntbl4 i
               where i.c9=o.c9 and i.c4=o.c4 and i.c1 is not distinct FROM o.c1);
UPDATE 22
--Testcase 305:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 128 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |     |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |     |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     | 10040 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  13 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   2 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

-- fail, multiple rows supplied:
--Testcase 306:
UPDATE tntbl4 SET (c1, c9) = (SELECT c9 + 1, c1 FROM tntbl4);
ERROR:  more than one row returned by a subquery used as an expression
-- set to null if no rows supplied:
--Testcase 307:
UPDATE tntbl4 SET (c1, c9) = (SELECT c9 + 1, c1 FROM tntbl4 where c5 = 2000)
  WHERE c9 = 127;
UPDATE 0
--Testcase 308:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1  | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
-----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   5 |             |    |  10 |  1000 |    | char varying  | 100 | 128 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
  -1 |             |    |     |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           4 |    |     |  2000 |    | test          | 200 |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 100 |           2 |    |     |  2000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
     |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
   9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |         259 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 110 |           6 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  20 |           8 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  40 |           3 |    |     | 10040 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  13 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
  20 |           8 |    | -10 | 10010 |    | varchar array |   1 |   2 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(22 rows)

-- *-expansion should work in this context:
--Testcase 309:
UPDATE tntbl4 SET (c1, c9) = ROW(v.*) FROM (VALUES(20, 100)) AS v(i, j)
  WHERE tntbl4.c1 = v.i;
UPDATE 2
-- you might expect this to work, but syntactically it's not a RowExpr:
--Testcase 310:
UPDATE tntbl4 SET (c1, c9) = (v.*) FROM (VALUES(20, 101)) AS v(i, j)
  WHERE tntbl4.c1 = v.i;
ERROR:  source for a multiple-column UPDATE item must be a sub-SELECT or ROW() expression
LINE 1: UPDATE tntbl4 SET (c1, c9) = (v.*) FROM (VALUES(20, 101)) AS...
                                      ^
-- if an alias for the target table is specified, don't allow references
-- to the original table name
--Testcase 311:
UPDATE tntbl4 AS t SET c9 = tntbl4.c9 + 10 WHERE t.c1 = 40;
ERROR:  invalid reference to FROM-clause entry for table "tntbl4"
LINE 1: UPDATE tntbl4 AS t SET c9 = tntbl4.c9 + 10 WHERE t.c1 = 40;
                                    ^
HINT:  Perhaps you meant to reference the table alias "t".
-- Make sure that we can update to a TOASTed value.
--Testcase 312:
UPDATE tntbl4 SET c2 = repeat('x', 255) WHERE c2 = 'car';
UPDATE 4
--Testcase 313:
SELECT c1, c3, char_length(c2) FROM tntbl4;
 c1  | c3 | char_length 
-----+----+-------------
     |    |            
   3 |    |            
   4 |    |           5
   5 |    |            
  -1 |    |            
 100 |    |           4
 100 |    |           2
     |    |            
  13 |    |            
  14 |    |           9
  15 |    |            
   9 |    |            
  40 |    |         259
 110 |    |           8
 110 |    |           6
  20 |    |           8
  40 |    |         255
  40 |    |         255
  40 |    |         255
  40 |    |         255
  10 |    |           4
  20 |    |           8
(22 rows)

-- Check multi-assignment with a Result node to handle a one-time filter.
--Testcase 314:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE tntbl4 t
  SET (c5, c1) = (SELECT c1, c5 FROM tntbl4 s WHERE s.c1 = t.c1)
  WHERE CURRENT_USER = SESSION_USER;
                               QUERY PLAN                                
-------------------------------------------------------------------------
 Update on public.tntbl4 t
   Update on public.tntbl4 t_1
   Update on public.tntbl4__pgspider_srv__0 t_2
   Update on public.tntbl4__postgres_svr__0 t_3
   Update on public.tntbl4__postgres_svr__2 t_4
   ->  Result
         Output: $2, $1, (SubPlan 1 (returns $1,$2)), t.tableoid, t.ctid
         ->  Append
               ->  Result
                     Output: t_1.c1, t_1.tableoid, t_1.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl4 t_1
                           Output: t_1.c1, t_1.tableoid, t_1.ctid
               ->  Result
                     Output: t_2.c1, t_2.tableoid, t_2.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl4__pgspider_srv__0 t_2
                           Output: t_2.c1, t_2.tableoid, t_2.ctid
               ->  Result
                     Output: t_3.c1, t_3.tableoid, t_3.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl4__postgres_svr__0 t_3
                           Output: t_3.c1, t_3.tableoid, t_3.ctid
               ->  Result
                     Output: t_4.c1, t_4.tableoid, t_4.ctid
                     One-Time Filter: (CURRENT_USER = SESSION_USER)
                     ->  Seq Scan on public.tntbl4__postgres_svr__2 t_4
                           Output: t_4.c1, t_4.tableoid, t_4.ctid
         SubPlan 1 (returns $1,$2)
           ->  Append
                 ->  Seq Scan on public.tntbl4 s_1
                       Output: s_1.c1, s_1.c5
                       Filter: (s_1.c1 = t.c1)
                 ->  Seq Scan on public.tntbl4__pgspider_srv__0 s_2
                       Output: s_2.c1, s_2.c5
                       Filter: (s_2.c1 = t.c1)
                 ->  Seq Scan on public.tntbl4__postgres_svr__0 s_3
                       Output: s_3.c1, s_3.c5
                       Filter: (s_3.c1 = t.c1)
                 ->  Seq Scan on public.tntbl4__postgres_svr__2 s_4
                       Output: s_4.c1, s_4.c5
                       Filter: (s_4.c1 = t.c1)
(42 rows)

--Testcase 315:
UPDATE tntbl4 t
  SET (c5, c1) = (SELECT c1, c5 FROM tntbl4 s WHERE s.c1 = t.c1)
  WHERE CURRENT_USER = SESSION_USER;
ERROR:  more than one row returned by a subquery used as an expression
--Testcase 316:
SELECT c1, c5, char_length(c2) FROM tntbl4;
 c1  |  c5   | char_length 
-----+-------+-------------
     |       |            
   3 |       |            
   4 |       |           5
   5 |  1000 |            
  -1 |  4000 |            
 100 |  2000 |           4
 100 |  2000 |           2
     |       |            
  13 |       |            
  14 |       |           9
  15 |       |            
   9 |       |            
  40 |       |         259
 110 |       |           8
 110 |       |           6
  20 |       |           8
  40 |       |         255
  40 |       |         255
  40 |       |         255
  40 | 10040 |         255
  10 |  1000 |           4
  20 | 10010 |           8
(22 rows)

--
-- UPDATE with IN feature
--
--Testcase 317:
UPDATE tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') SET c8 = 56563.1212;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') SET c8...
                      ^
--Testcase 318:
UPDATE tntbl4 IN ('/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr_2/') SET c8 = 22.2;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl4 IN ('/pgspider_core_svr/pgspider_svr/postgres_...
                      ^
--
-- DELETE
--
-- allow an alias to be specified for DELETE's target table
--Testcase 319:
DELETE FROM tntbl4 AS dt WHERE dt.c1 > 75;
DELETE 4
-- if an alias is specified, don't allow the original table name
-- to be referenced
--Testcase 320:
DELETE FROM tntbl4 dt WHERE tntbl4.c1 > 45;
ERROR:  invalid reference to FROM-clause entry for table "tntbl4"
LINE 1: DELETE FROM tntbl4 dt WHERE tntbl4.c1 > 45;
                                    ^
HINT:  Perhaps you meant to reference the table alias "dt".
--Testcase 321:
SELECT c1, c3, char_length(c2) FROM tntbl4;
 c1 | c3 | char_length 
----+----+-------------
    |    |            
  3 |    |            
  4 |    |           5
  5 |    |            
 -1 |    |            
    |    |            
 13 |    |            
 14 |    |           9
 15 |    |            
  9 |    |            
 40 |    |         259
 20 |    |           8
 40 |    |         255
 40 |    |         255
 40 |    |         255
 40 |    |         255
 10 |    |           4
 20 |    |           8
(18 rows)

-- delete a row with a TOASTed value
--Testcase 322:
DELETE FROM tntbl4 WHERE c1 > 25;
DELETE 5
--Testcase 323:
SELECT c1, c3, char_length(c2) FROM tntbl4;
 c1 | c3 | char_length 
----+----+-------------
    |    |            
  3 |    |            
  4 |    |           5
  5 |    |            
 -1 |    |            
    |    |            
 13 |    |            
 14 |    |           9
 15 |    |            
  9 |    |            
 20 |    |           8
 10 |    |           4
 20 |    |           8
(13 rows)

--
-- DELETE with IN feature
--
--Testcase 324:
DELETE FROM tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') WHERE c1 = 10;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl4 IN ('/pgspider_core_svr/pgspider_svr/') W...
                           ^
--Testcase 325:
DELETE FROM tntbl4 IN ('/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr_2/', '/pgspider_core_svr/pgspider_svr/griddb_svr/') WHERE c5 = 3000;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl4 IN ('/pgspider_core_svr/pgspider_svr/post...
                           ^
-- *** Finish test for tntbl4 *** --
-----------------------------------------------------------------------------------
-- *** Start test for tntbl5 *** --
-- This FDW does not support modification, the result will fail all over
--Testcase 326:
SELECT c1, c2 FROM tntbl5;
 c1 |  c2   
----+-------
 10 | test
 20 | foo
 30 | test1
 40 | foo1
(4 rows)

--Testcase 327:
--INSERT INTO tntbl5 VALUES (DEFAULT, 'abc');
--Testcase 328:
--INSERT INTO tntbl5 VALUES (1, 'foo');
--Testcase 329:
--INSERT tntbl5 IN ('/pgspider_core_svr/pgspider_svr/') VALUES (2, 'zzzzz');
--Testcase 330:
--UPDATE tntbl5 SET c2 = 'foo' WHERE c1 IS NULL;
--Testcase 331:
--UPDATE tntbl5 IN ('/pgspider_core_svr/pgspider_svr/file_svr/', '/pgspider_core_svr/pgspider_svr/file_svr_2/') SET c2 = DEFAULT;
--Testcase 332:
--DELETE FROM tntbl5 WHERE c2 = 'foo';
--Testcase 333:
--DELETE FROM tntbl5 IN ('/pgspider_core_svr/pgspider_svr/file_svr/');
-- *** Finish test for tntbl5 *** --
-----------------------------------------------------------------------------------
--
-- Check behavior of enable_transaction_feature_check=true
--
-- Check value of enable_transaction_feature_check
--Testcase 334:
SET enable_transaction_feature_check TO true;
ERROR:  unrecognized configuration parameter "enable_transaction_feature_check"
--Testcase 335:
INSERT INTO tntbl1 VALUES (200, 70, 2.0, 200.0, 3000, '2030-02-20 03:00:07', '2005-10-20 10:20:54+02', DEFAULT, 'abc', 'foo');
ERROR:  INSERT has more expressions than target columns
LINE 1: ...03:00:07', '2005-10-20 10:20:54+02', DEFAULT, 'abc', 'foo');
                                                                ^
--Testcase 336:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 337:
INSERT INTO tntbl1 VALUES (100, 20, 3.0, 300.0, 4000, '2038-01-19 03:14:07', '2004-10-19 10:23:54+02', interval '2 months ago', '40', 'abc'), (-100, 30, DEFAULT, DEFAULT, 2000, '2004-10-19 10:23:54', '1970-01-01 00:00:01+07', interval '1 year 3 hours 20 minutes', 'Beera', 'John Does'),
    ((SELECT 200), (SELECT i FROM (VALUES(3)) as foo (i)), 400.212, 5000, '2007-10-19 10:23:54', '2007-10-19 10:23:54+02', interval '1 year 2 months 3 days', 'VALUES are fun!', 'foo');
ERROR:  INSERT has more expressions than target columns
LINE 1: ...0-19 10:23:54+02', interval '2 months ago', '40', 'abc'), (-...
                                                             ^
--Testcase 338:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 339:
INSERT INTO tntbl1 VALUES (900, 80, 6.0, 400.03, 6000, '2030-02-20 03:00:07', '2005-10-20 10:20:54+02', interval '1 months ago', repeat('x', 10), repeat('a', 20));
ERROR:  INSERT has more expressions than target columns
LINE 1: ...54+02', interval '1 months ago', repeat('x', 10), repeat('a'...
                                                             ^
--Testcase 340:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 341:
UPDATE tntbl1 SET c2 = 10.001 WHERE c1 = 100;
UPDATE 0
--Testcase 342:
DELETE FROM tntbl1 dt WHERE tntbl1.c1 > 100;
ERROR:  invalid reference to FROM-clause entry for table "tntbl1"
LINE 1: DELETE FROM tntbl1 dt WHERE tntbl1.c1 > 100;
                                    ^
HINT:  Perhaps you meant to reference the table alias "dt".
--Testcase 343:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 344:
INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/oracle_svr/', '/pgspider_core_svr/pgspider_svr/tiny_svr/') VALUES (600, 120, 73.265, 78523.5, 5421659, '2002-10-19 10:23:54', '1972-01-01 00:00:01+07', 'Two', 'TwoTwo');
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl1 IN ('/pgspider_core_svr/pgspider_svr/orac...
                           ^
--Testcase 345:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 346:
UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') SET c4 = 60.0;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl1 IN ('/pgspider_core_svr/pgspider_svr/') SET c4...
                      ^
--Testcase 347:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 348:
DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/sqlite_svr/', '/pgspider_core_svr/pgspider_svr/tiny_svr/', '/pgspider_core_svr/pgspider_svr/mysql_svr/') WHERE c5 = 4000;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl1 IN ('/pgspider_core_svr/pgspider_svr/sqli...
                           ^
--Testcase 349:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(9 rows)

--Testcase 350:
INSERT INTO tntbl2 (_id, c1, c2, c3, c4, c5) VALUES ('121', 29, 'DEFAULT', true, 4.0, 4000);
INSERT 0 1
--Testcase 351:
INSERT INTO tntbl2 (_id, c1, c2, c3) VALUES ('122', 1, '2', true);
INSERT 0 1
--Testcase 352:
INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') VALUES ('xin3', 10, 'tst_in_feature', true, 5.0, 5000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') V...
                           ^
--Testcase 353:
SELECT * FROM tntbl2;
  _id  | c1 |   c2    | c3 | c4 |  c5   
-------+----+---------+----+----+-------
       |    |         |    |    |      
 3     |    |         |    |    |      
 4     |    | 3q      |    |    |      
 test  |    | test    | f  |    |      
 bugle |    |         | t  |    |  4000
 bugle | 41 |         | t  |    |  2000
 bugle | 21 |         | t  |    |  1000
 121   | 29 | DEFAULT | t  |  4 |  4000
 122   |  1 | 2       | t  |    |      
 bugle | 12 |         | t  |    | 10000
 2_    |  2 | varchar | f  |    |  2000
 bugle | 21 |         | t  |    |  1000
(12 rows)

--Testcase 354:
UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') SET c4 = 7000;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') SET c4...
                      ^
--Testcase 355:
SELECT * FROM tntbl2;
  _id  | c1 |   c2    | c3 | c4 |  c5   
-------+----+---------+----+----+-------
       |    |         |    |    |      
 3     |    |         |    |    |      
 4     |    | 3q      |    |    |      
 test  |    | test    | f  |    |      
 bugle |    |         | t  |    |  4000
 bugle | 41 |         | t  |    |  2000
 bugle | 21 |         | t  |    |  1000
 121   | 29 | DEFAULT | t  |  4 |  4000
 122   |  1 | 2       | t  |    |      
 bugle | 12 |         | t  |    | 10000
 2_    |  2 | varchar | f  |    |  2000
 bugle | 21 |         | t  |    |  1000
(12 rows)

--Testcase 356:
DELETE FROM tntbl2 WHERE c2 = '2';
DELETE 1
--Testcase 357:
SELECT * FROM tntbl2;
  _id  | c1 |   c2    | c3 | c4 |  c5   
-------+----+---------+----+----+-------
       |    |         |    |    |      
 3     |    |         |    |    |      
 4     |    | 3q      |    |    |      
 test  |    | test    | f  |    |      
 bugle |    |         | t  |    |  4000
 bugle | 41 |         | t  |    |  2000
 bugle | 21 |         | t  |    |  1000
 121   | 29 | DEFAULT | t  |  4 |  4000
 bugle | 12 |         | t  |    | 10000
 2_    |  2 | varchar | f  |    |  2000
 bugle | 21 |         | t  |    |  1000
(11 rows)

--Testcase 358:
DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') WHERE c1 = 10;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl2 IN ('/pgspider_core_svr/pgspider_svr/') W...
                           ^
--Testcase 359:
SELECT * FROM tntbl2;
  _id  | c1 |   c2    | c3 | c4 |  c5   
-------+----+---------+----+----+-------
       |    |         |    |    |      
 3     |    |         |    |    |      
 4     |    | 3q      |    |    |      
 test  |    | test    | f  |    |      
 bugle |    |         | t  |    |  4000
 bugle | 41 |         | t  |    |  2000
 bugle | 21 |         | t  |    |  1000
 121   | 29 | DEFAULT | t  |  4 |  4000
 bugle | 12 |         | t  |    | 10000
 2_    |  2 | varchar | f  |    |  2000
 bugle | 21 |         | t  |    |  1000
(11 rows)

--Testcase 360:
INSERT INTO tntbl3 (_id, c1, c2, c3, c4) VALUES (DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT 0 1
--Testcase 361:
INSERT INTO tntbl3 (_id, c2, c3) VALUES ('_3', 3.0, DEFAULT);
INSERT 0 1
--Testcase 362:
INSERT INTO tntbl3 VALUES(repeat('x', 10), 20, 4.0, 40.0, 5000);
INSERT 0 1
--Testcase 363:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 |  c4  
----------------+----+----+----+------
                |    |    |    |     
 _3             |    |  3 |    |     
 xxxxxxxxxx     | 20 |  4 | 40 | 5000
                |    |    |    |     
 _3             |    |    |    |     
 _4             |    |    |    |     
 test1          |    |    |    |     
 test2          |    |    |    |     
                |    |    |    |     
 _31            |    |    |    |     
 _41            |    |    |    |     
 test11         |    |    |    |     
 test21         |    |    |    |     
 11_1           |  2 |    |    |     
 22_1           |  3 |    |    |     
 11_            |  1 |    |    |     
 22_            |  2 |    |    |     
 text_post_id   |  1 |    |    |     
 text_tiny      |  1 |    |    |     
 text_sqlite_id |  1 |    |    |     
(20 rows)

--Testcase 364:
INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/mongo_svr/', '/pgspider_core_svr/pgspider_svr/griddb_svr/', '/pgspider_core_svr/pgspider_svr/mysql_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr/', '/pgspider_core_svr/pgspider_svr/postgres_svr_1/') VALUES ('_infea', 20, 6.0, 60.0, 6000);
ERROR:  syntax error at or near "IN"
LINE 1: INSERT INTO tntbl3 IN ('/pgspider_core_svr/pgspider_svr/dyna...
                           ^
--Testcase 365:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 |  c4  
----------------+----+----+----+------
                |    |    |    |     
 _3             |    |  3 |    |     
 xxxxxxxxxx     | 20 |  4 | 40 | 5000
                |    |    |    |     
 _3             |    |    |    |     
 _4             |    |    |    |     
 test1          |    |    |    |     
 test2          |    |    |    |     
                |    |    |    |     
 _31            |    |    |    |     
 _41            |    |    |    |     
 test11         |    |    |    |     
 test21         |    |    |    |     
 11_1           |  2 |    |    |     
 22_1           |  3 |    |    |     
 11_            |  1 |    |    |     
 22_            |  2 |    |    |     
 text_post_id   |  1 |    |    |     
 text_tiny      |  1 |    |    |     
 text_sqlite_id |  1 |    |    |     
(20 rows)

--Testcase 366:
UPDATE tntbl3 SET (c3, c2) = (SELECT c2 + 1 , c3 FROM tntbl3);
ERROR:  more than one row returned by a subquery used as an expression
--Testcase 367:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 |  c4  
----------------+----+----+----+------
                |    |    |    |     
 _3             |    |  3 |    |     
 xxxxxxxxxx     | 20 |  4 | 40 | 5000
                |    |    |    |     
 _3             |    |    |    |     
 _4             |    |    |    |     
 test1          |    |    |    |     
 test2          |    |    |    |     
                |    |    |    |     
 _31            |    |    |    |     
 _41            |    |    |    |     
 test11         |    |    |    |     
 test21         |    |    |    |     
 11_1           |  2 |    |    |     
 22_1           |  3 |    |    |     
 11_            |  1 |    |    |     
 22_            |  2 |    |    |     
 text_post_id   |  1 |    |    |     
 text_tiny      |  1 |    |    |     
 text_sqlite_id |  1 |    |    |     
(20 rows)

--Testcase 368:
UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') SET c3 = 56.0;
ERROR:  syntax error at or near "IN"
LINE 1: UPDATE tntbl3 IN ('/pgspider_core_svr/pgspider_svr/') SET c3...
                      ^
--Testcase 369:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 |  c4  
----------------+----+----+----+------
                |    |    |    |     
 _3             |    |  3 |    |     
 xxxxxxxxxx     | 20 |  4 | 40 | 5000
                |    |    |    |     
 _3             |    |    |    |     
 _4             |    |    |    |     
 test1          |    |    |    |     
 test2          |    |    |    |     
                |    |    |    |     
 _31            |    |    |    |     
 _41            |    |    |    |     
 test11         |    |    |    |     
 test21         |    |    |    |     
 11_1           |  2 |    |    |     
 22_1           |  3 |    |    |     
 11_            |  1 |    |    |     
 22_            |  2 |    |    |     
 text_post_id   |  1 |    |    |     
 text_tiny      |  1 |    |    |     
 text_sqlite_id |  1 |    |    |     
(20 rows)

--Testcase 370:
DELETE FROM tntbl3 WHERE c1 > 10;
DELETE 1
--Testcase 371:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 | c4 
----------------+----+----+----+----
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
(19 rows)

--Testcase 372:
DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/mongo_svr/') WHERE c3 = 56.0;
ERROR:  syntax error at or near "IN"
LINE 1: DELETE FROM tntbl3 IN ('/pgspider_core_svr/pgspider_svr/mong...
                           ^
--Testcase 373:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 | c4 
----------------+----+----+----+----
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
(19 rows)

--
-- Test with __spd_url
--
--Testcase 374:
DELETE FROM tntbl3 WHERE __spd_url = '/pgspider_core_svr/pgspider_svr/mongo_svr/';
ERROR:  column "__spd_url" does not exist
LINE 1: DELETE FROM tntbl3 WHERE __spd_url = '/pgspider_core_svr/pgs...
                                 ^
--Testcase 375:
DELETE FROM tntbl3 WHERE __spd_url IS NOT NULL;
ERROR:  column "__spd_url" does not exist
LINE 1: DELETE FROM tntbl3 WHERE __spd_url IS NOT NULL;
                                 ^
--Testcase 376:
INSERT INTO tntbl3 VALUES ('foo', 30, 5.0, 50.0, 6000) WHERE __spd_url IN ('/pgspider_core_svr/pgspider_svr/dynamodb_svr/', '/pgspider_core_svr/pgspider_svr/mysql_svr/', '/pgspider_core_svr/pgspider_svr/griddb_svr/');
ERROR:  syntax error at or near "WHERE"
LINE 1: ...T INTO tntbl3 VALUES ('foo', 30, 5.0, 50.0, 6000) WHERE __sp...
                                                             ^
--Testcase 377:
INSERT INTO tntbl3 SELECT * FROM tntbl3;
INSERT 0 19
--Testcase 378:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 | c4 
----------------+----+----+----+----
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
(38 rows)

--Testcase 379:
UPDATE tntbl3 SET _id = _id || '@' WHERE __spd_url = '/pgspider_core_svr/pgspider_svr/postgres_svr/';
ERROR:  column "__spd_url" does not exist
LINE 1: UPDATE tntbl3 SET _id = _id || '@' WHERE __spd_url = '/pgspi...
                                                 ^
--Testcase 380:
SELECT * FROM tntbl3;
      _id       | c1 | c2 | c3 | c4 
----------------+----+----+----+----
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |  3 |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
                |    |    |    |   
 _3             |    |    |    |   
 _4             |    |    |    |   
 test1          |    |    |    |   
 test2          |    |    |    |   
                |    |    |    |   
 _31            |    |    |    |   
 _41            |    |    |    |   
 test11         |    |    |    |   
 test21         |    |    |    |   
 11_1           |  2 |    |    |   
 22_1           |  3 |    |    |   
 11_            |  1 |    |    |   
 22_            |  2 |    |    |   
 text_post_id   |  1 |    |    |   
 text_tiny      |  1 |    |    |   
 text_sqlite_id |  1 |    |    |   
(38 rows)

--Testcase 381:
DELETE FROM tntbl3;
DELETE 38
--Testcase 382:
INSERT INTO tntbl3 SELECT * FROM tntbl3;
INSERT 0 0
--Testcase 383:
SELECT * FROM tntbl3;
 _id | c1 | c2 | c3 | c4 
-----+----+----+----+----
(0 rows)

--Testcase 384:
INSERT INTO tntbl3 VALUES(repeat('x', 10), 20, 4.0, 40.0, 5000);
INSERT 0 1
--Testcase 385:
SELECT _id, sum(c1), avg(c2) FROM tntbl3 WHERE __spd_url IS NOT NULL GROUP BY _id HAVING _id IS NOT NULL LIMIT 5;
ERROR:  column "__spd_url" does not exist
LINE 1: SELECT _id, sum(c1), avg(c2) FROM tntbl3 WHERE __spd_url IS ...
                                                       ^
--Testcase 386:
INSERT INTO tntbl3 VALUES ('foo', 30, 5.0, 50.0, 6000, '/pgspider_core_svr/pgspider_svr/postgres_svr/');
ERROR:  INSERT has more expressions than target columns
LINE 1: ...T INTO tntbl3 VALUES ('foo', 30, 5.0, 50.0, 6000, '/pgspider...
                                                             ^
--Testcase 387:
SELECT * FROM tntbl3;
    _id     | c1 | c2 | c3 |  c4  
------------+----+----+----+------
 xxxxxxxxxx | 20 |  4 | 40 | 5000
(1 row)

--
-- Test with optional options: tntbl1
--
--
-- ON CONFLICT, this work only on postgres_fdw
--
--Testcase 388:
INSERT INTO tntbl1(c1, c2) VALUES(11, 12);  -- duplicate key
INSERT 0 1
--Testcase 389:
INSERT INTO tntbl1(c1, c2) VALUES(11, 12) ON CONFLICT DO NOTHING; -- works
INSERT 0 1
--Testcase 390:
INSERT INTO tntbl1(c1, c2) VALUES(11, 12) ON CONFLICT (c1, c2) DO NOTHING; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--Testcase 391:
INSERT INTO tntbl1(c1, c2) VALUES(11, 12) ON CONFLICT (c1, c2) DO UPDATE SET c3 = 562.3213; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--
-- WITH CHECK, this work only on postgres_fdw
--
--Testcase 392:
CREATE VIEW rw_view AS SELECT * FROM tntbl1
  WHERE c1 < c2 WITH CHECK OPTION;
CREATE VIEW
--Testcase 393:
\d+ rw_view
                                     View "public.rw_view"
 Column |            Type             | Collation | Nullable | Default | Storage  | Description 
--------+-----------------------------+-----------+----------+---------+----------+-------------
 c1     | integer                     |           |          |         | plain    | 
 c2     | smallint                    |           |          |         | plain    | 
 c3     | double precision            |           |          |         | plain    | 
 c4     | double precision            |           |          |         | plain    | 
 c5     | bigint                      |           |          |         | plain    | 
 c6     | timestamp without time zone |           |          |         | plain    | 
 c7     | timestamp with time zone    |           |          |         | plain    | 
 c8     | character(255)              |           |          |         | extended | 
 c9     | character varying(255)      |           |          |         | extended | 
View definition:
 SELECT tntbl1.c1,
    tntbl1.c2,
    tntbl1.c3,
    tntbl1.c4,
    tntbl1.c5,
    tntbl1.c6,
    tntbl1.c7,
    tntbl1.c8,
    tntbl1.c9
   FROM tntbl1
  WHERE tntbl1.c1 < tntbl1.c2;
Options: check_option=cascaded

--Testcase 394:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(c1, c2) VALUES (5, 0);
                                                                                                QUERY PLAN                                                                                                
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl1
   ->  Result
         Output: 5, '0'::smallint, NULL::double precision, NULL::double precision, NULL::bigint, NULL::timestamp without time zone, NULL::timestamp with time zone, NULL::bpchar, NULL::character varying
(3 rows)

--Testcase 395:
INSERT INTO rw_view(c1, c2) VALUES (5, 0); -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (5, 0, null, null, null, null, null, null, null).
--Testcase 396:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(c1, c2) VALUES (0, 15);
                                                                                                QUERY PLAN                                                                                                 
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl1
   ->  Result
         Output: 0, '15'::smallint, NULL::double precision, NULL::double precision, NULL::bigint, NULL::timestamp without time zone, NULL::timestamp with time zone, NULL::bpchar, NULL::character varying
(3 rows)

--Testcase 397:
INSERT INTO rw_view(c1, c2) VALUES (0, 15); -- ok
INSERT 0 1
--Testcase 398:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 11 | 12 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 11 | 12 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  0 | 15 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(12 rows)

--Testcase 399:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c1 = c1 + 100;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl1
   Update on public.tntbl1 tntbl1_1
   Update on public.tntbl1__pgspider_srv__0 tntbl1_2
   Update on public.tntbl1__postgres_svr__0 tntbl1_3
   Update on public.tntbl1__mysql_svr__0 tntbl1_4
   Update on public.tntbl1__tiny_svr__0 tntbl1_5
   Update on public.tntbl1__oracle_svr__0 tntbl1_6
   Update on public.tntbl1__sqlite_svr__0 tntbl1_7
   ->  Result
         Output: (tntbl1.c1 + 100), tntbl1.tableoid, tntbl1.ctid
         ->  Append
               ->  Seq Scan on public.tntbl1 tntbl1_1
                     Output: tntbl1_1.c1, tntbl1_1.tableoid, tntbl1_1.ctid
                     Filter: (tntbl1_1.c1 < tntbl1_1.c2)
               ->  Seq Scan on public.tntbl1__pgspider_srv__0 tntbl1_2
                     Output: tntbl1_2.c1, tntbl1_2.tableoid, tntbl1_2.ctid
                     Filter: (tntbl1_2.c1 < tntbl1_2.c2)
               ->  Seq Scan on public.tntbl1__postgres_svr__0 tntbl1_3
                     Output: tntbl1_3.c1, tntbl1_3.tableoid, tntbl1_3.ctid
                     Filter: (tntbl1_3.c1 < tntbl1_3.c2)
               ->  Seq Scan on public.tntbl1__mysql_svr__0 tntbl1_4
                     Output: tntbl1_4.c1, tntbl1_4.tableoid, tntbl1_4.ctid
                     Filter: (tntbl1_4.c1 < tntbl1_4.c2)
               ->  Seq Scan on public.tntbl1__tiny_svr__0 tntbl1_5
                     Output: tntbl1_5.c1, tntbl1_5.tableoid, tntbl1_5.ctid
                     Filter: (tntbl1_5.c1 < tntbl1_5.c2)
               ->  Seq Scan on public.tntbl1__oracle_svr__0 tntbl1_6
                     Output: tntbl1_6.c1, tntbl1_6.tableoid, tntbl1_6.ctid
                     Filter: (tntbl1_6.c1 < tntbl1_6.c2)
               ->  Seq Scan on public.tntbl1__sqlite_svr__0 tntbl1_7
                     Output: tntbl1_7.c1, tntbl1_7.tableoid, tntbl1_7.ctid
                     Filter: (tntbl1_7.c1 < tntbl1_7.c2)
(32 rows)

--Testcase 400:
UPDATE rw_view SET c1 = c1 + 100; -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (111, 12, null, null, null, null, null, null, null).
--Testcase 401:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c2 = c2 + 15;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl1
   Update on public.tntbl1 tntbl1_1
   Update on public.tntbl1__pgspider_srv__0 tntbl1_2
   Update on public.tntbl1__postgres_svr__0 tntbl1_3
   Update on public.tntbl1__mysql_svr__0 tntbl1_4
   Update on public.tntbl1__tiny_svr__0 tntbl1_5
   Update on public.tntbl1__oracle_svr__0 tntbl1_6
   Update on public.tntbl1__sqlite_svr__0 tntbl1_7
   ->  Result
         Output: (tntbl1.c2 + 15), tntbl1.tableoid, tntbl1.ctid
         ->  Append
               ->  Seq Scan on public.tntbl1 tntbl1_1
                     Output: tntbl1_1.c2, tntbl1_1.tableoid, tntbl1_1.ctid
                     Filter: (tntbl1_1.c1 < tntbl1_1.c2)
               ->  Seq Scan on public.tntbl1__pgspider_srv__0 tntbl1_2
                     Output: tntbl1_2.c2, tntbl1_2.tableoid, tntbl1_2.ctid
                     Filter: (tntbl1_2.c1 < tntbl1_2.c2)
               ->  Seq Scan on public.tntbl1__postgres_svr__0 tntbl1_3
                     Output: tntbl1_3.c2, tntbl1_3.tableoid, tntbl1_3.ctid
                     Filter: (tntbl1_3.c1 < tntbl1_3.c2)
               ->  Seq Scan on public.tntbl1__mysql_svr__0 tntbl1_4
                     Output: tntbl1_4.c2, tntbl1_4.tableoid, tntbl1_4.ctid
                     Filter: (tntbl1_4.c1 < tntbl1_4.c2)
               ->  Seq Scan on public.tntbl1__tiny_svr__0 tntbl1_5
                     Output: tntbl1_5.c2, tntbl1_5.tableoid, tntbl1_5.ctid
                     Filter: (tntbl1_5.c1 < tntbl1_5.c2)
               ->  Seq Scan on public.tntbl1__oracle_svr__0 tntbl1_6
                     Output: tntbl1_6.c2, tntbl1_6.tableoid, tntbl1_6.ctid
                     Filter: (tntbl1_6.c1 < tntbl1_6.c2)
               ->  Seq Scan on public.tntbl1__sqlite_svr__0 tntbl1_7
                     Output: tntbl1_7.c2, tntbl1_7.tableoid, tntbl1_7.ctid
                     Filter: (tntbl1_7.c1 < tntbl1_7.c2)
(32 rows)

--Testcase 402:
UPDATE rw_view SET c2 = c2 + 15; -- ok
UPDATE 3
--Testcase 403:
SELECT * FROM tntbl1;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 11 | 27 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 11 | 27 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  0 | 30 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(12 rows)

--Testcase 404:
DROP VIEW rw_view;
DROP VIEW
--
-- RETURNING
--
--Testcase 405:
INSERT INTO tntbl1 VALUES (1, 2, 3.0, 6.0, 21, '2002-01-01 00:05:00', '2022-05-16 10:50:00+01', 'test1', 'test1') RETURNING *;
 c1 | c2 | c3 | c4 | c5 |         c6          |           c7           |                                                                                                                               c8                                                                                                                                |  c9   
----+----+----+----+----+---------------------+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-------
  1 |  2 |  3 |  6 | 21 | 2002-01-01 00:05:00 | 2022-05-16 09:50:00+00 | test1                                                                                                                                                                                                                                                           | test1
(1 row)

INSERT 0 1
--Testcase 406:
INSERT INTO tntbl1 (c1, c2, c3, c4, c5) VALUES (2, 3, 4.0, 5.0, 6) RETURNING c1, c4, c6;
 c1 | c4 | c6 
----+----+----
  2 |  5 | 
(1 row)

INSERT 0 1
--Testcase 407:
UPDATE tntbl1 SET c7 = '2100-01-01 10:00:00+01' WHERE c1 = 2 AND c2 = 3 RETURNING (tntbl1), *;
                 tntbl1                  | c1 | c2 | c3 | c4 | c5 | c6 |           c7           | c8 | c9 
-----------------------------------------+----+----+----+----+----+----+------------------------+----+----
 (2,3,4,5,6,,"2100-01-01 09:00:00+00",,) |  2 |  3 |  4 |  5 |  6 |    | 2100-01-01 09:00:00+00 |    | 
(1 row)

UPDATE 1
--Testcase 408:
DELETE FROM tntbl1 WHERE c4 = 6.0 RETURNING c1, c2;
 c1 | c2 
----+----
  1 |  2
(1 row)

DELETE 1
--Testcase 409:
DELETE FROM tntbl1 RETURNING *;
 c1 | c2 | c3 | c4 | c5 | c6 |           c7           |                                                                                                                               c8                                                                                                                                |          c9          
----+----+----+----+----+----+------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  1 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
    |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 21 |    |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 13 |    |  4 |    |    |    | 2007-10-19 08:23:54+00 | bugle                                                                                                                                                                                                                                                           | foo
 11 | 27 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
 11 | 27 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  0 | 30 |    |    |    |    |                        |                                                                                                                                                                                                                                                                 | 
  2 |  3 |  4 |  5 |  6 |    | 2100-01-01 09:00:00+00 |                                                                                                                                                                                                                                                                 | 
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | tiny array                                                                                                                                                                                                                                                      | tiny varchar array
 20 |  0 |  1 |    |    |    | 2017-08-08 02:00:00+00 | char array                                                                                                                                                                                                                                                      | varchar array
 20 |  0 |  1 |    |    |    | 2022-06-22 07:00:00+00 | sqlite char array                                                                                                                                                                                                                                               | sqlite varchar array
(13 rows)

DELETE 13
--
-- Test with optional options: tntbl2
--
--
--
-- ON CONFLICT, this work only on postgres_fdw
--
--Testcase 410:
INSERT INTO tntbl2(_id, c1) VALUES('key', 12);  -- duplicate key
INSERT 0 1
--Testcase 411:
INSERT INTO tntbl2(_id, c1) VALUES('key', 12) ON CONFLICT DO NOTHING; -- works
INSERT 0 1
--Testcase 412:
INSERT INTO tntbl2(_id, c1) VALUES('key', 12) ON CONFLICT (_id, c1) DO NOTHING; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--Testcase 413:
INSERT INTO tntbl2(_id, c1) VALUES('key', 12) ON CONFLICT (_id, c1) DO UPDATE SET c2 = 'conficted!'; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--
-- WITH CHECK, this work only on postgres_fdw
--
--Testcase 414:
CREATE VIEW rw_view AS SELECT * FROM tntbl2
  WHERE c1 < c5 WITH CHECK OPTION;
CREATE VIEW
--Testcase 415:
\d+ rw_view
                                   View "public.rw_view"
 Column |          Type          | Collation | Nullable | Default | Storage  | Description 
--------+------------------------+-----------+----------+---------+----------+-------------
 _id    | text                   |           |          |         | extended | 
 c1     | integer                |           |          |         | plain    | 
 c2     | character varying(255) |           |          |         | extended | 
 c3     | boolean                |           |          |         | plain    | 
 c4     | double precision       |           |          |         | plain    | 
 c5     | bigint                 |           |          |         | plain    | 
View definition:
 SELECT tntbl2._id,
    tntbl2.c1,
    tntbl2.c2,
    tntbl2.c3,
    tntbl2.c4,
    tntbl2.c5
   FROM tntbl2
  WHERE tntbl2.c1 < tntbl2.c5;
Options: check_option=cascaded

--Testcase 416:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(_id, c1, c5) VALUES ('id1', 5, 0);
                                                 QUERY PLAN                                                  
-------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl2
   ->  Result
         Output: 'id1'::text, 5, NULL::character varying, NULL::boolean, NULL::double precision, '0'::bigint
(3 rows)

--Testcase 417:
INSERT INTO rw_view(_id, c1, c5) VALUES ('id1', 5, 0); -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (id1, 5, null, null, null, 0).
--Testcase 418:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(_id, c1, c5) VALUES ('id2', 5, 3000);
                                                   QUERY PLAN                                                   
----------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl2
   ->  Result
         Output: 'id2'::text, 5, NULL::character varying, NULL::boolean, NULL::double precision, '3000'::bigint
(3 rows)

--Testcase 419:
INSERT INTO rw_view(_id, c1, c5) VALUES ('id2', 5, 3000); -- ok
INSERT 0 1
--Testcase 420:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           4 |    |           4 | f  |    |      
           5 |    |             | t  |    |  4000
           5 | 41 |             | t  |    |  2000
           5 | 21 |             | t  |    |  1000
           3 | 29 |           7 | t  |  4 |  4000
           3 | 12 |             |    |    |      
           3 | 12 |             |    |    |      
           3 |  5 |             |    |    |  3000
           5 | 12 |             | t  |    | 10000
           2 |  2 |           7 | f  |    |  2000
           5 | 21 |             | t  |    |  1000
(14 rows)

--Testcase 421:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c1 = c1 + 10000;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl2
   Update on public.tntbl2 tntbl2_1
   Update on public.tntbl2__pgspider_srv__0 tntbl2_2
   Update on public.tntbl2__odbc_post_svr__0 tntbl2_3
   Update on public.tntbl2__jdbc_mysql_svr__0 tntbl2_4
   Update on public.tntbl2__mongo_svr__0 tntbl2_5
   Update on public.tntbl2__dynamodb_svr__0 tntbl2_6
   Update on public.tntbl2__griddb_svr__0 tntbl2_7
   ->  Result
         Output: (tntbl2.c1 + 10000), tntbl2.tableoid, tntbl2.ctid
         ->  Append
               ->  Seq Scan on public.tntbl2 tntbl2_1
                     Output: tntbl2_1.c1, tntbl2_1.tableoid, tntbl2_1.ctid
                     Filter: (tntbl2_1.c1 < tntbl2_1.c5)
               ->  Seq Scan on public.tntbl2__pgspider_srv__0 tntbl2_2
                     Output: tntbl2_2.c1, tntbl2_2.tableoid, tntbl2_2.ctid
                     Filter: (tntbl2_2.c1 < tntbl2_2.c5)
               ->  Seq Scan on public.tntbl2__odbc_post_svr__0 tntbl2_3
                     Output: tntbl2_3.c1, tntbl2_3.tableoid, tntbl2_3.ctid
                     Filter: (tntbl2_3.c1 < tntbl2_3.c5)
               ->  Seq Scan on public.tntbl2__jdbc_mysql_svr__0 tntbl2_4
                     Output: tntbl2_4.c1, tntbl2_4.tableoid, tntbl2_4.ctid
                     Filter: (tntbl2_4.c1 < tntbl2_4.c5)
               ->  Seq Scan on public.tntbl2__mongo_svr__0 tntbl2_5
                     Output: tntbl2_5.c1, tntbl2_5.tableoid, tntbl2_5.ctid
                     Filter: (tntbl2_5.c1 < tntbl2_5.c5)
               ->  Seq Scan on public.tntbl2__dynamodb_svr__0 tntbl2_6
                     Output: tntbl2_6.c1, tntbl2_6.tableoid, tntbl2_6.ctid
                     Filter: (tntbl2_6.c1 < tntbl2_6.c5)
               ->  Seq Scan on public.tntbl2__griddb_svr__0 tntbl2_7
                     Output: tntbl2_7.c1, tntbl2_7.tableoid, tntbl2_7.ctid
                     Filter: (tntbl2_7.c1 < tntbl2_7.c5)
(32 rows)

--Testcase 422:
UPDATE rw_view SET c1 = c1 + 10000; -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (bugle, 10041, null, t, null, 2000).
--Testcase 423:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c1 = c1 + 15;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl2
   Update on public.tntbl2 tntbl2_1
   Update on public.tntbl2__pgspider_srv__0 tntbl2_2
   Update on public.tntbl2__odbc_post_svr__0 tntbl2_3
   Update on public.tntbl2__jdbc_mysql_svr__0 tntbl2_4
   Update on public.tntbl2__mongo_svr__0 tntbl2_5
   Update on public.tntbl2__dynamodb_svr__0 tntbl2_6
   Update on public.tntbl2__griddb_svr__0 tntbl2_7
   ->  Result
         Output: (tntbl2.c1 + 15), tntbl2.tableoid, tntbl2.ctid
         ->  Append
               ->  Seq Scan on public.tntbl2 tntbl2_1
                     Output: tntbl2_1.c1, tntbl2_1.tableoid, tntbl2_1.ctid
                     Filter: (tntbl2_1.c1 < tntbl2_1.c5)
               ->  Seq Scan on public.tntbl2__pgspider_srv__0 tntbl2_2
                     Output: tntbl2_2.c1, tntbl2_2.tableoid, tntbl2_2.ctid
                     Filter: (tntbl2_2.c1 < tntbl2_2.c5)
               ->  Seq Scan on public.tntbl2__odbc_post_svr__0 tntbl2_3
                     Output: tntbl2_3.c1, tntbl2_3.tableoid, tntbl2_3.ctid
                     Filter: (tntbl2_3.c1 < tntbl2_3.c5)
               ->  Seq Scan on public.tntbl2__jdbc_mysql_svr__0 tntbl2_4
                     Output: tntbl2_4.c1, tntbl2_4.tableoid, tntbl2_4.ctid
                     Filter: (tntbl2_4.c1 < tntbl2_4.c5)
               ->  Seq Scan on public.tntbl2__mongo_svr__0 tntbl2_5
                     Output: tntbl2_5.c1, tntbl2_5.tableoid, tntbl2_5.ctid
                     Filter: (tntbl2_5.c1 < tntbl2_5.c5)
               ->  Seq Scan on public.tntbl2__dynamodb_svr__0 tntbl2_6
                     Output: tntbl2_6.c1, tntbl2_6.tableoid, tntbl2_6.ctid
                     Filter: (tntbl2_6.c1 < tntbl2_6.c5)
               ->  Seq Scan on public.tntbl2__griddb_svr__0 tntbl2_7
                     Output: tntbl2_7.c1, tntbl2_7.tableoid, tntbl2_7.ctid
                     Filter: (tntbl2_7.c1 < tntbl2_7.c5)
(32 rows)

--Testcase 424:
UPDATE rw_view SET c1 = c1 + 15; -- ok
UPDATE 7
--Testcase 425:
SELECT char_length(_id), c1, char_length(c2), c3, c4, c5 FROM tntbl2;
 char_length | c1 | char_length | c3 | c4 |  c5   
-------------+----+-------------+----+----+-------
             |    |             |    |    |      
           1 |    |             |    |    |      
           1 |    |           2 |    |    |      
           4 |    |           4 | f  |    |      
           5 |    |             | t  |    |  4000
           3 | 12 |             |    |    |      
           3 | 12 |             |    |    |      
           5 | 56 |             | t  |    |  2000
           5 | 36 |             | t  |    |  1000
           3 | 44 |           7 | t  |  4 |  4000
           3 | 20 |             |    |    |  3000
           5 | 27 |             | t  |    | 10000
           2 | 17 |           7 | f  |    |  2000
           5 | 36 |             | t  |    |  1000
(14 rows)

--Testcase 426:
DROP VIEW rw_view;
DROP VIEW
--
-- RETURNING
--
--Testcase 427:
INSERT INTO tntbl2 VALUES ('00:05:00', 20, '2022-05-16', false, 50.0, 7000) RETURNING *;
   _id    | c1 |     c2     | c3 | c4 |  c5  
----------+----+------------+----+----+------
 00:05:00 | 20 | 2022-05-16 | f  | 50 | 7000
(1 row)

INSERT 0 1
--Testcase 428:
INSERT INTO tntbl2 (_id, c1, c2, c3, c4, c5) VALUES ('_key_', 30, 'test', true, 50.0, 8000) RETURNING c1, c4, c5;
 c1 | c4 |  c5  
----+----+------
 30 | 50 | 8000
(1 row)

INSERT 0 1
--Testcase 429:
UPDATE tntbl2 SET c2 = '2100-01-01 10:00:00+01' WHERE c1 = 20 AND c3 = false RETURNING (tntbl2), *;
                      tntbl2                      |   _id    | c1 |           c2           | c3 | c4 |  c5  
--------------------------------------------------+----------+----+------------------------+----+----+------
 (00:05:00,20,"2100-01-01 10:00:00+01",f,50,7000) | 00:05:00 | 20 | 2100-01-01 10:00:00+01 | f  | 50 | 7000
(1 row)

UPDATE 1
--Testcase 430:
DELETE FROM tntbl2 WHERE c4 = 50.0 RETURNING _id, c1, c2;
   _id    | c1 |           c2           
----------+----+------------------------
 _key_    | 30 | test
 00:05:00 | 20 | 2100-01-01 10:00:00+01
(2 rows)

DELETE 2
--Testcase 431:
DELETE FROM tntbl2 RETURNING *;
  _id  | c1 |   c2    | c3 | c4 |  c5   
-------+----+---------+----+----+-------
       |    |         |    |    |      
 3     |    |         |    |    |      
 4     |    | 3q      |    |    |      
 test  |    | test    | f  |    |      
 bugle |    |         | t  |    |  4000
 key   | 12 |         |    |    |      
 key   | 12 |         |    |    |      
 bugle | 56 |         | t  |    |  2000
 bugle | 36 |         | t  |    |  1000
 121   | 44 | DEFAULT | t  |  4 |  4000
 id2   | 20 |         |    |    |  3000
 bugle | 27 |         | t  |    | 10000
 2_    | 17 | varchar | f  |    |  2000
 bugle | 36 |         | t  |    |  1000
(14 rows)

DELETE 14
--
-- Test with optional options: tntbl3
--
--
--
-- ON CONFLICT, this work only on postgres_fdw
--
--Testcase 432:
INSERT INTO tntbl3(_id, c1) VALUES('key$', 12);  -- duplicate key
INSERT 0 1
--Testcase 433:
INSERT INTO tntbl3(_id, c1) VALUES('key$', 12) ON CONFLICT DO NOTHING; -- works
INSERT 0 1
--Testcase 434:
INSERT INTO tntbl3(_id, c1) VALUES('key$', 12) ON CONFLICT (_id, c1) DO NOTHING; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--Testcase 435:
INSERT INTO tntbl3(_id, c1) VALUES('key$', 12) ON CONFLICT (_id, c1) DO UPDATE SET c2 = 'conficted!'; -- unsupported
ERROR:  invalid input syntax for type double precision: "conficted!"
LINE 1: ...y$', 12) ON CONFLICT (_id, c1) DO UPDATE SET c2 = 'conficted...
                                                             ^
--
-- WITH CHECK, this work only on postgres_fdw
--
--Testcase 436:
CREATE VIEW rw_view AS SELECT * FROM tntbl3
  WHERE c2 < c3 WITH CHECK OPTION;
CREATE VIEW
--Testcase 437:
\d+ rw_view
                                View "public.rw_view"
 Column |       Type       | Collation | Nullable | Default | Storage  | Description 
--------+------------------+-----------+----------+---------+----------+-------------
 _id    | text             |           |          |         | extended | 
 c1     | integer          |           |          |         | plain    | 
 c2     | double precision |           |          |         | plain    | 
 c3     | double precision |           |          |         | plain    | 
 c4     | bigint           |           |          |         | plain    | 
View definition:
 SELECT tntbl3._id,
    tntbl3.c1,
    tntbl3.c2,
    tntbl3.c3,
    tntbl3.c4
   FROM tntbl3
  WHERE tntbl3.c2 < tntbl3.c3;
Options: check_option=cascaded

--Testcase 438:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(_id, c2, c3) VALUES ('id1', 5, 0);
                                               QUERY PLAN                                               
--------------------------------------------------------------------------------------------------------
 Insert on public.tntbl3
   ->  Result
         Output: 'id1'::text, NULL::integer, '5'::double precision, '0'::double precision, NULL::bigint
(3 rows)

--Testcase 439:
INSERT INTO rw_view(_id, c2, c3) VALUES ('id1', 5, 0); -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (id1, null, 5, 0, null).
--Testcase 440:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(_id, c2, c3) VALUES ('id2', 5, 3000);
                                                QUERY PLAN                                                 
-----------------------------------------------------------------------------------------------------------
 Insert on public.tntbl3
   ->  Result
         Output: 'id2'::text, NULL::integer, '5'::double precision, '3000'::double precision, NULL::bigint
(3 rows)

--Testcase 441:
INSERT INTO rw_view(_id, c2, c3) VALUES ('id2', 5, 3000); -- ok
INSERT 0 1
--Testcase 442:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 | c2 |  c3  |  c4  
-------------+----+----+------+------
          10 | 20 |  4 |   40 | 5000
           4 | 12 |    |      |     
           4 | 12 |    |      |     
           3 |    |  5 | 3000 |     
(4 rows)

--Testcase 443:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c2 = c2 + 10000;
                                      QUERY PLAN                                       
---------------------------------------------------------------------------------------
 Update on public.tntbl3
   Update on public.tntbl3 tntbl3_1
   Update on public.tntbl3__pgspider_srv__0 tntbl3_2
   Update on public.tntbl3__jdbc_post_svr__0 tntbl3_3
   Update on public.tntbl3__odbc_mysql_svr__0 tntbl3_4
   Update on public.tntbl3__mongo_svr__0 tntbl3_5
   Update on public.tntbl3__dynamodb_svr__0 tntbl3_6
   Update on public.tntbl3__griddb_svr__0 tntbl3_7
   Update on public.tntbl3__postgres_svr__0 tntbl3_8
   Update on public.tntbl3__mysql_svr__0 tntbl3_9
   Update on public.tntbl3__tiny_svr__0 tntbl3_10
   Update on public.tntbl3__oracle_svr__0 tntbl3_11
   Update on public.tntbl3__sqlite_svr__0 tntbl3_12
   Update on public.tntbl3__postgres_svr__1 tntbl3_13
   ->  Result
         Output: (tntbl3.c2 + '10000'::double precision), tntbl3.tableoid, tntbl3.ctid
         ->  Append
               ->  Seq Scan on public.tntbl3 tntbl3_1
                     Output: tntbl3_1.c2, tntbl3_1.tableoid, tntbl3_1.ctid
                     Filter: (tntbl3_1.c2 < tntbl3_1.c3)
               ->  Seq Scan on public.tntbl3__pgspider_srv__0 tntbl3_2
                     Output: tntbl3_2.c2, tntbl3_2.tableoid, tntbl3_2.ctid
                     Filter: (tntbl3_2.c2 < tntbl3_2.c3)
               ->  Seq Scan on public.tntbl3__jdbc_post_svr__0 tntbl3_3
                     Output: tntbl3_3.c2, tntbl3_3.tableoid, tntbl3_3.ctid
                     Filter: (tntbl3_3.c2 < tntbl3_3.c3)
               ->  Seq Scan on public.tntbl3__odbc_mysql_svr__0 tntbl3_4
                     Output: tntbl3_4.c2, tntbl3_4.tableoid, tntbl3_4.ctid
                     Filter: (tntbl3_4.c2 < tntbl3_4.c3)
               ->  Seq Scan on public.tntbl3__mongo_svr__0 tntbl3_5
                     Output: tntbl3_5.c2, tntbl3_5.tableoid, tntbl3_5.ctid
                     Filter: (tntbl3_5.c2 < tntbl3_5.c3)
               ->  Seq Scan on public.tntbl3__dynamodb_svr__0 tntbl3_6
                     Output: tntbl3_6.c2, tntbl3_6.tableoid, tntbl3_6.ctid
                     Filter: (tntbl3_6.c2 < tntbl3_6.c3)
               ->  Seq Scan on public.tntbl3__griddb_svr__0 tntbl3_7
                     Output: tntbl3_7.c2, tntbl3_7.tableoid, tntbl3_7.ctid
                     Filter: (tntbl3_7.c2 < tntbl3_7.c3)
               ->  Seq Scan on public.tntbl3__postgres_svr__0 tntbl3_8
                     Output: tntbl3_8.c2, tntbl3_8.tableoid, tntbl3_8.ctid
                     Filter: (tntbl3_8.c2 < tntbl3_8.c3)
               ->  Seq Scan on public.tntbl3__mysql_svr__0 tntbl3_9
                     Output: tntbl3_9.c2, tntbl3_9.tableoid, tntbl3_9.ctid
                     Filter: (tntbl3_9.c2 < tntbl3_9.c3)
               ->  Seq Scan on public.tntbl3__tiny_svr__0 tntbl3_10
                     Output: tntbl3_10.c2, tntbl3_10.tableoid, tntbl3_10.ctid
                     Filter: (tntbl3_10.c2 < tntbl3_10.c3)
               ->  Seq Scan on public.tntbl3__oracle_svr__0 tntbl3_11
                     Output: tntbl3_11.c2, tntbl3_11.tableoid, tntbl3_11.ctid
                     Filter: (tntbl3_11.c2 < tntbl3_11.c3)
               ->  Seq Scan on public.tntbl3__sqlite_svr__0 tntbl3_12
                     Output: tntbl3_12.c2, tntbl3_12.tableoid, tntbl3_12.ctid
                     Filter: (tntbl3_12.c2 < tntbl3_12.c3)
               ->  Seq Scan on public.tntbl3__postgres_svr__1 tntbl3_13
                     Output: tntbl3_13.c2, tntbl3_13.tableoid, tntbl3_13.ctid
                     Filter: (tntbl3_13.c2 < tntbl3_13.c3)
(56 rows)

--Testcase 444:
UPDATE rw_view SET c2 = c2 + 10000; -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (xxxxxxxxxx, 20, 10004, 40, 5000).
--Testcase 445:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c2 = c2 + 15;
                                     QUERY PLAN                                     
------------------------------------------------------------------------------------
 Update on public.tntbl3
   Update on public.tntbl3 tntbl3_1
   Update on public.tntbl3__pgspider_srv__0 tntbl3_2
   Update on public.tntbl3__jdbc_post_svr__0 tntbl3_3
   Update on public.tntbl3__odbc_mysql_svr__0 tntbl3_4
   Update on public.tntbl3__mongo_svr__0 tntbl3_5
   Update on public.tntbl3__dynamodb_svr__0 tntbl3_6
   Update on public.tntbl3__griddb_svr__0 tntbl3_7
   Update on public.tntbl3__postgres_svr__0 tntbl3_8
   Update on public.tntbl3__mysql_svr__0 tntbl3_9
   Update on public.tntbl3__tiny_svr__0 tntbl3_10
   Update on public.tntbl3__oracle_svr__0 tntbl3_11
   Update on public.tntbl3__sqlite_svr__0 tntbl3_12
   Update on public.tntbl3__postgres_svr__1 tntbl3_13
   ->  Result
         Output: (tntbl3.c2 + '15'::double precision), tntbl3.tableoid, tntbl3.ctid
         ->  Append
               ->  Seq Scan on public.tntbl3 tntbl3_1
                     Output: tntbl3_1.c2, tntbl3_1.tableoid, tntbl3_1.ctid
                     Filter: (tntbl3_1.c2 < tntbl3_1.c3)
               ->  Seq Scan on public.tntbl3__pgspider_srv__0 tntbl3_2
                     Output: tntbl3_2.c2, tntbl3_2.tableoid, tntbl3_2.ctid
                     Filter: (tntbl3_2.c2 < tntbl3_2.c3)
               ->  Seq Scan on public.tntbl3__jdbc_post_svr__0 tntbl3_3
                     Output: tntbl3_3.c2, tntbl3_3.tableoid, tntbl3_3.ctid
                     Filter: (tntbl3_3.c2 < tntbl3_3.c3)
               ->  Seq Scan on public.tntbl3__odbc_mysql_svr__0 tntbl3_4
                     Output: tntbl3_4.c2, tntbl3_4.tableoid, tntbl3_4.ctid
                     Filter: (tntbl3_4.c2 < tntbl3_4.c3)
               ->  Seq Scan on public.tntbl3__mongo_svr__0 tntbl3_5
                     Output: tntbl3_5.c2, tntbl3_5.tableoid, tntbl3_5.ctid
                     Filter: (tntbl3_5.c2 < tntbl3_5.c3)
               ->  Seq Scan on public.tntbl3__dynamodb_svr__0 tntbl3_6
                     Output: tntbl3_6.c2, tntbl3_6.tableoid, tntbl3_6.ctid
                     Filter: (tntbl3_6.c2 < tntbl3_6.c3)
               ->  Seq Scan on public.tntbl3__griddb_svr__0 tntbl3_7
                     Output: tntbl3_7.c2, tntbl3_7.tableoid, tntbl3_7.ctid
                     Filter: (tntbl3_7.c2 < tntbl3_7.c3)
               ->  Seq Scan on public.tntbl3__postgres_svr__0 tntbl3_8
                     Output: tntbl3_8.c2, tntbl3_8.tableoid, tntbl3_8.ctid
                     Filter: (tntbl3_8.c2 < tntbl3_8.c3)
               ->  Seq Scan on public.tntbl3__mysql_svr__0 tntbl3_9
                     Output: tntbl3_9.c2, tntbl3_9.tableoid, tntbl3_9.ctid
                     Filter: (tntbl3_9.c2 < tntbl3_9.c3)
               ->  Seq Scan on public.tntbl3__tiny_svr__0 tntbl3_10
                     Output: tntbl3_10.c2, tntbl3_10.tableoid, tntbl3_10.ctid
                     Filter: (tntbl3_10.c2 < tntbl3_10.c3)
               ->  Seq Scan on public.tntbl3__oracle_svr__0 tntbl3_11
                     Output: tntbl3_11.c2, tntbl3_11.tableoid, tntbl3_11.ctid
                     Filter: (tntbl3_11.c2 < tntbl3_11.c3)
               ->  Seq Scan on public.tntbl3__sqlite_svr__0 tntbl3_12
                     Output: tntbl3_12.c2, tntbl3_12.tableoid, tntbl3_12.ctid
                     Filter: (tntbl3_12.c2 < tntbl3_12.c3)
               ->  Seq Scan on public.tntbl3__postgres_svr__1 tntbl3_13
                     Output: tntbl3_13.c2, tntbl3_13.tableoid, tntbl3_13.ctid
                     Filter: (tntbl3_13.c2 < tntbl3_13.c3)
(56 rows)

--Testcase 446:
UPDATE rw_view SET c2 = c2 + 15; -- ok
UPDATE 2
--Testcase 447:
SELECT char_length(_id), c1, c2, c3, c4 FROM tntbl3;
 char_length | c1 | c2 |  c3  |  c4  
-------------+----+----+------+------
           4 | 12 |    |      |     
           4 | 12 |    |      |     
          10 | 20 | 19 |   40 | 5000
           3 |    | 20 | 3000 |     
(4 rows)

--Testcase 448:
DROP VIEW rw_view;
DROP VIEW
--
-- RETURNING
--
--Testcase 449:
INSERT INTO tntbl3 VALUES ('0000', 20, 5.0, 50.0, 5000) RETURNING *;
 _id  | c1 | c2 | c3 |  c4  
------+----+----+----+------
 0000 | 20 |  5 | 50 | 5000
(1 row)

INSERT 0 1
--Testcase 450:
INSERT INTO tntbl3 (_id, c1, c2, c3, c4) VALUES ('_key_', 30, 4.0, 50.0, 6000) RETURNING c1, c2, c3;
 c1 | c2 | c3 
----+----+----
 30 |  4 | 50
(1 row)

INSERT 0 1
--Testcase 451:
UPDATE tntbl3 SET c2 = 7.0 WHERE c1 = 20 AND c3 = 50.0 RETURNING (tntbl3), *;
       tntbl3        | _id  | c1 | c2 | c3 |  c4  
---------------------+------+----+----+----+------
 (0000,20,7,50,5000) | 0000 | 20 |  7 | 50 | 5000
(1 row)

UPDATE 1
--Testcase 452:
DELETE FROM tntbl3 WHERE c3 = 50.0 RETURNING _id, c1, c2;
  _id  | c1 | c2 
-------+----+----
 _key_ | 30 |  4
 0000  | 20 |  7
(2 rows)

DELETE 2
--Testcase 453:
DELETE FROM tntbl3 RETURNING *;
    _id     | c1 | c2 |  c3  |  c4  
------------+----+----+------+------
 key$       | 12 |    |      |     
 key$       | 12 |    |      |     
 xxxxxxxxxx | 20 | 19 |   40 | 5000
 id2        |    | 20 | 3000 |     
(4 rows)

DELETE 4
--
-- Test with optional options: tntbl4
--
--
--
-- ON CONFLICT, this work only on postgres_fdw
--
--Testcase 454:
INSERT INTO tntbl4(c1, c2) VALUES(14, 'key$');  -- duplicate key
INSERT 0 1
--Testcase 455:
INSERT INTO tntbl4(c1, c2) VALUES(14, 'key$') ON CONFLICT DO NOTHING; -- works
INSERT 0 1
--Testcase 456:
INSERT INTO tntbl4(c1, c2) VALUES(14, 'key$') ON CONFLICT (c1, c2) DO NOTHING; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--Testcase 457:
INSERT INTO tntbl4(c1, c2) VALUES(14, 'key$') ON CONFLICT (c1, c2) DO UPDATE SET c4 = 5.0; -- unsupported
ERROR:  there is no unique or exclusion constraint matching the ON CONFLICT specification
--
-- WITH CHECK, this work only on postgres_fdw
--
--Testcase 458:
CREATE VIEW rw_view AS SELECT * FROM tntbl4
  WHERE c1 < c5 WITH CHECK OPTION;
CREATE VIEW
--Testcase 459:
\d+ rw_view
                                     View "public.rw_view"
 Column |            Type             | Collation | Nullable | Default | Storage  | Description 
--------+-----------------------------+-----------+----------+---------+----------+-------------
 c1     | integer                     |           |          |         | plain    | 
 c2     | text                        |           |          |         | extended | 
 c3     | boolean                     |           |          |         | plain    | 
 c4     | double precision            |           |          |         | plain    | 
 c5     | bigint                      |           |          |         | plain    | 
 c6     | character(255)              |           |          |         | extended | 
 c7     | character varying(255)      |           |          |         | extended | 
 c8     | double precision            |           |          |         | plain    | 
 c9     | smallint                    |           |          |         | plain    | 
 c10    | timestamp without time zone |           |          |         | plain    | 
 c11    | timestamp with time zone    |           |          |         | plain    | 
 c12    | date                        |           |          |         | plain    | 
 c13    | json                        |           |          |         | extended | 
 c14    | jsonb                       |           |          |         | extended | 
 c15    | uuid                        |           |          |         | plain    | 
 c16    | point                       |           |          |         | plain    | 
 c17    | bytea                       |           |          |         | extended | 
 c18    | bit(10)                     |           |          |         | extended | 
 c19    | bit varying(10)             |           |          |         | extended | 
 c20    | interval                    |           |          |         | plain    | 
View definition:
 SELECT tntbl4.c1,
    tntbl4.c2,
    tntbl4.c3,
    tntbl4.c4,
    tntbl4.c5,
    tntbl4.c6,
    tntbl4.c7,
    tntbl4.c8,
    tntbl4.c9,
    tntbl4.c10,
    tntbl4.c11,
    tntbl4.c12,
    tntbl4.c13,
    tntbl4.c14,
    tntbl4.c15,
    tntbl4.c16,
    tntbl4.c17,
    tntbl4.c18,
    tntbl4.c19,
    tntbl4.c20
   FROM tntbl4
  WHERE tntbl4.c1 < tntbl4.c5;
Options: check_option=cascaded

--Testcase 460:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(c1, c5) VALUES (15, 0);
                                                                                                                                                                           QUERY PLAN                                                                                                                                                                            
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl4
   ->  Result
         Output: 15, NULL::text, NULL::boolean, NULL::double precision, '0'::bigint, NULL::bpchar, NULL::character varying, NULL::double precision, NULL::smallint, NULL::timestamp without time zone, NULL::timestamp with time zone, NULL::date, NULL::json, NULL::jsonb, NULL::uuid, NULL::point, NULL::bytea, NULL::"bit", NULL::bit varying, NULL::interval
(3 rows)

--Testcase 461:
INSERT INTO rw_view(c1, c5) VALUES (15, 0); -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (15, null, null, null, 0, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).
--Testcase 462:
EXPLAIN (VERBOSE, COSTS OFF)
INSERT INTO rw_view(c1, c5) VALUES (15, 3000);
                                                                                                                                                                             QUERY PLAN                                                                                                                                                                             
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Insert on public.tntbl4
   ->  Result
         Output: 15, NULL::text, NULL::boolean, NULL::double precision, '3000'::bigint, NULL::bpchar, NULL::character varying, NULL::double precision, NULL::smallint, NULL::timestamp without time zone, NULL::timestamp with time zone, NULL::date, NULL::json, NULL::jsonb, NULL::uuid, NULL::point, NULL::bytea, NULL::"bit", NULL::bit varying, NULL::interval
(3 rows)

--Testcase 463:
INSERT INTO rw_view(c1, c5) VALUES (15, 3000); -- ok
INSERT 0 1
--Testcase 464:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
 14 |           4 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 |           4 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 15 |             |    |     |  3000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  5 |             |    |  10 |  1000 |    | char varying  | 100 | 128 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
 -1 |             |    |     |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           8 |    |     |       |    |               |     | 100 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 10 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  13 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 20 |           8 |    | -10 | 10010 |    | varchar array |   1 | 100 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(16 rows)

--Testcase 465:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c1 = c1 + 10000;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl4
   Update on public.tntbl4 tntbl4_1
   Update on public.tntbl4__pgspider_srv__0 tntbl4_2
   Update on public.tntbl4__postgres_svr__0 tntbl4_3
   Update on public.tntbl4__postgres_svr__2 tntbl4_4
   ->  Result
         Output: (tntbl4.c1 + 10000), tntbl4.tableoid, tntbl4.ctid
         ->  Append
               ->  Seq Scan on public.tntbl4 tntbl4_1
                     Output: tntbl4_1.c1, tntbl4_1.tableoid, tntbl4_1.ctid
                     Filter: (tntbl4_1.c1 < tntbl4_1.c5)
               ->  Seq Scan on public.tntbl4__pgspider_srv__0 tntbl4_2
                     Output: tntbl4_2.c1, tntbl4_2.tableoid, tntbl4_2.ctid
                     Filter: (tntbl4_2.c1 < tntbl4_2.c5)
               ->  Seq Scan on public.tntbl4__postgres_svr__0 tntbl4_3
                     Output: tntbl4_3.c1, tntbl4_3.tableoid, tntbl4_3.ctid
                     Filter: (tntbl4_3.c1 < tntbl4_3.c5)
               ->  Seq Scan on public.tntbl4__postgres_svr__2 tntbl4_4
                     Output: tntbl4_4.c1, tntbl4_4.tableoid, tntbl4_4.ctid
                     Filter: (tntbl4_4.c1 < tntbl4_4.c5)
(20 rows)

--Testcase 466:
UPDATE rw_view SET c1 = c1 + 10000; -- should fail
ERROR:  new row violates check option for view "rw_view"
DETAIL:  Failing row contains (10015, null, null, null, 3000, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null).
--Testcase 467:
EXPLAIN (VERBOSE, COSTS OFF)
UPDATE rw_view SET c1 = c1 + 15;
                                QUERY PLAN                                 
---------------------------------------------------------------------------
 Update on public.tntbl4
   Update on public.tntbl4 tntbl4_1
   Update on public.tntbl4__pgspider_srv__0 tntbl4_2
   Update on public.tntbl4__postgres_svr__0 tntbl4_3
   Update on public.tntbl4__postgres_svr__2 tntbl4_4
   ->  Result
         Output: (tntbl4.c1 + 15), tntbl4.tableoid, tntbl4.ctid
         ->  Append
               ->  Seq Scan on public.tntbl4 tntbl4_1
                     Output: tntbl4_1.c1, tntbl4_1.tableoid, tntbl4_1.ctid
                     Filter: (tntbl4_1.c1 < tntbl4_1.c5)
               ->  Seq Scan on public.tntbl4__pgspider_srv__0 tntbl4_2
                     Output: tntbl4_2.c1, tntbl4_2.tableoid, tntbl4_2.ctid
                     Filter: (tntbl4_2.c1 < tntbl4_2.c5)
               ->  Seq Scan on public.tntbl4__postgres_svr__0 tntbl4_3
                     Output: tntbl4_3.c1, tntbl4_3.tableoid, tntbl4_3.ctid
                     Filter: (tntbl4_3.c1 < tntbl4_3.c5)
               ->  Seq Scan on public.tntbl4__postgres_svr__2 tntbl4_4
                     Output: tntbl4_4.c1, tntbl4_4.tableoid, tntbl4_4.ctid
                     Filter: (tntbl4_4.c1 < tntbl4_4.c5)
(20 rows)

--Testcase 468:
UPDATE rw_view SET c1 = c1 + 15; -- ok
UPDATE 5
--Testcase 469:
SELECT c1, char_length(c2), c3, c4, c5, c6, c7, c8, c9, c10, c11, c12, c13, c14, c15, c16, c17, c18, c19, c20 FROM tntbl4;
 c1 | char_length | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-------------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
 14 |           4 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 |           4 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |             |    |     |  3000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |             |    |  10 |  1000 |    | char varying  | 100 | 128 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
 14 |             |    |     |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 |           5 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 13 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 |           9 |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 15 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  9 |             |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           8 |    |     |       |    |               |     | 100 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 25 |           4 |    |  10 |  1000 |    | varchar array |  -1 |  13 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 35 |           8 |    | -10 | 10010 |    | varchar array |   1 | 100 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(16 rows)

--Testcase 470:
DROP VIEW rw_view;
DROP VIEW
--
-- RETURNING
--
--Testcase 471:
INSERT INTO tntbl4 VALUES (70, '0000', true, 5.0, 5000) RETURNING *;
 c1 |  c2  | c3 | c4 |  c5  | c6 | c7 | c8 | c9 | c10 | c11 | c12 | c13 | c14 | c15 | c16 | c17 | c18 | c19 | c20 
----+------+----+----+------+----+----+----+----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
 70 | 0000 | t  |  5 | 5000 |    |    |    |    |     |     |     |     |     |     |     |     |     |     | 
(1 row)

INSERT 0 1
--Testcase 472:
INSERT INTO tntbl4 (c1, c2, c3, c4, c5) VALUES (80, '_key_', false, 4.0, 6000) RETURNING c1, c2, c3;
 c1 |  c2   | c3 
----+-------+----
 80 | _key_ | f
(1 row)

INSERT 0 1
--Testcase 473:
UPDATE tntbl4 SET c4 = 7.0 WHERE c1 = 70 AND c3 = true RETURNING (tntbl4), *;
              tntbl4               | c1 |  c2  | c3 | c4 |  c5  | c6 | c7 | c8 | c9 | c10 | c11 | c12 | c13 | c14 | c15 | c16 | c17 | c18 | c19 | c20 
-----------------------------------+----+------+----+----+------+----+----+----+----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----
 (70,0000,t,7,5000,,,,,,,,,,,,,,,) | 70 | 0000 | t  |  7 | 5000 |    |    |    |    |     |     |     |     |     |     |     |     |     |     | 
(1 row)

UPDATE 1
--Testcase 474:
DELETE FROM tntbl4 WHERE c3 = true RETURNING c1, c2, c3;
 c1 |  c2  | c3 
----+------+----
 70 | 0000 | t
(1 row)

DELETE 1
--Testcase 475:
DELETE FROM tntbl4 RETURNING *;
 c1 |    c2     | c3 | c4  |  c5   | c6 |      c7       | c8  | c9  |         c10         |          c11           |    c12     |                 c13                 |                                   c14                                   |                 c15                  |   c16   |         c17          |    c18     |  c19  |              c20               
----+-----------+----+-----+-------+----+---------------+-----+-----+---------------------+------------------------+------------+-------------------------------------+-------------------------------------------------------------------------+--------------------------------------+---------+----------------------+------------+-------+--------------------------------
 14 | key$      |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 | key$      |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 30 |           |    |     |  3000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 |           |    |  10 |  1000 |    | char varying  | 100 | 128 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 0001-01-01 | { "customer": "John Does"}          | {"tags": ["tag1", "tag2"], "finished": true}                            | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 6 years 5 mons 4 days 03:02:01
 14 |           |    |     |  4000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 80 | _key_     | f  |   4 |  6000 |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  3 |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  4 | ANC#$     |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
    |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 13 |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 14 | ANC#$next |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 15 |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
  9 |           |    |     |       |    |               |     |     |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 20 | textnext  |    |     |       |    |               |     | 100 |                     |                        |            |                                     |                                                                         |                                      |         |                      |            |       | 
 25 | text      |    |  10 |  1000 |    | varchar array |  -1 |  13 | 2004-10-19 10:23:54 | 2004-10-19 08:23:54+00 | 2001-01-01 | {"product": "test","quantity": 1}   | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": true}  | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
 35 | texttext  |    | -10 | 10010 |    | varchar array |   1 | 100 | 2005-10-19 10:23:54 | 2005-10-19 08:23:54+00 | 2001-01-01 | {"product": "sample","quantity": 1} | {"name": "paintings", "tags": ["Scene", "Portrait"], "finished": false} | 2f404849-f62c-4234-b0c8-e230bd694045 | (1,-45) | \xa7a8a9aaabacadaeaf | 1111111111 | 10101 | 1 year 03:20:00
(17 rows)

DELETE 17
--Clean
--Testcase 476:
DROP TABLE tntbl1 CASCADE;
NOTICE:  drop cascades to 6 other objects
DETAIL:  drop cascades to table tntbl1__pgspider_srv__0
drop cascades to table tntbl1__postgres_svr__0
drop cascades to table tntbl1__mysql_svr__0
drop cascades to table tntbl1__tiny_svr__0
drop cascades to table tntbl1__oracle_svr__0
drop cascades to table tntbl1__sqlite_svr__0
DROP TABLE
--Testcase 477:
DROP TABLE tntbl2 CASCADE;
NOTICE:  drop cascades to 6 other objects
DETAIL:  drop cascades to table tntbl2__pgspider_srv__0
drop cascades to table tntbl2__odbc_post_svr__0
drop cascades to table tntbl2__jdbc_mysql_svr__0
drop cascades to table tntbl2__mongo_svr__0
drop cascades to table tntbl2__dynamodb_svr__0
drop cascades to table tntbl2__griddb_svr__0
DROP TABLE
--Testcase 478:
DROP TABLE tntbl3 CASCADE;
NOTICE:  drop cascades to 12 other objects
DETAIL:  drop cascades to table tntbl3__pgspider_srv__0
drop cascades to table tntbl3__jdbc_post_svr__0
drop cascades to table tntbl3__odbc_mysql_svr__0
drop cascades to table tntbl3__mongo_svr__0
drop cascades to table tntbl3__dynamodb_svr__0
drop cascades to table tntbl3__griddb_svr__0
drop cascades to table tntbl3__postgres_svr__0
drop cascades to table tntbl3__mysql_svr__0
drop cascades to table tntbl3__tiny_svr__0
drop cascades to table tntbl3__oracle_svr__0
drop cascades to table tntbl3__sqlite_svr__0
drop cascades to table tntbl3__postgres_svr__1
DROP TABLE
--Testcase 479:
DROP TABLE tntbl4 CASCADE;
NOTICE:  drop cascades to 3 other objects
DETAIL:  drop cascades to table tntbl4__pgspider_srv__0
drop cascades to table tntbl4__postgres_svr__0
drop cascades to table tntbl4__postgres_svr__2
DROP TABLE
--Testcase 480:
DROP TABLE tntbl5 CASCADE;
NOTICE:  drop cascades to 3 other objects
DETAIL:  drop cascades to table tntbl5__pgspider_srv__0
drop cascades to table tntbl5__file_svr__0
drop cascades to table tntbl5__file_svr__2
DROP TABLE
--Testcase 481:
--DROP USER MAPPING FOR CURRENT_USER;
--Testcase 482:
--DROP USER MAPPING FOR CURRENT_USER;
--Testcase 483:
--DROP EXTENSION postgres_fdw CASCADE;
--Testcase 484:
--DROP EXTENSION sqlite_fdw CASCADE;
--Testcase 485:
--DROP EXTENSION tinybrace_fdw CASCADE;
--Testcase 486:
--DROP EXTENSION mysql_fdw CASCADE;
--Testcase 487:
--DROP EXTENSION oracle_fdw CASCADE;
--Testcase 488:
--DROP EXTENSION odbc_fdw CASCADE;
--Testcase 489:
--DROP EXTENSION jdbc_fdw CASCADE;
--Testcase 490:
--DROP EXTENSION griddb_fdw CASCADE;
--Testcase 491:
--DROP EXTENSION mongo_fdw CASCADE;
--Testcase 492:
--DROP EXTENSION dynamodb_fdw CASCADE;
--Testcase 493:
--DROP EXTENSION file_fdw CASCADE;
--Testcase 494:
--DROP CASCADE;
--Testcase 495:
--DROP CASCADE;
--Testcase 496:
--DROP EXTENSION pgspider_core_fdw CASCADE;
